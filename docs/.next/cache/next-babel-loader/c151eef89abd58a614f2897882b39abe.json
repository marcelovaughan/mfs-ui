{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread2\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport marked from 'marked/lib/marked';\nimport { LANGUAGES_IN_PROGRESS } from \"../constants\";\nimport kebabCase from 'lodash/kebabCase';\nimport { rewriteUrlForNextExport } from 'next/dist/next-server/lib/router/rewrite-url-for-export';\nimport textToHash from \"./textToHash\";\nimport prism from \"./prism\";\nvar headerRegExp = /---[\\r\\n]([\\s\\S]*)[\\r\\n]---/;\nvar titleRegExp = /# (.*)[\\r\\n]/;\nvar descriptionRegExp = /<p class=\"description\">(.*)<\\/p>[\\r\\n]/;\nvar headerKeyValueRegExp = /(.*): (.*)/g;\nvar emptyRegExp = /^\\s*$/;\nvar notEnglishMarkdownRegExp = /-([a-z]{2})\\.md$/;\n/**\n * Extract information from the top of the markdown.\n * For instance, the following input:\n *\n * ---\n * title: Backdrop React Component\n * components: Backdrop\n * ---\n *\n * # Backdrop\n *\n * should output:\n * { title: 'Backdrop React Component', components: ['Backdrop'] }\n */\n\nexport function getHeaders(markdown) {\n  var header = markdown.match(headerRegExp);\n\n  if (!header) {\n    return {\n      components: []\n    };\n  }\n\n  header = header[1];\n  var regexMatches;\n  var headers = {}; // eslint-disable-next-line no-cond-assign\n\n  while ((regexMatches = headerKeyValueRegExp.exec(header)) !== null) {\n    headers[regexMatches[1]] = regexMatches[2];\n  }\n\n  if (headers.components) {\n    headers.components = headers.components.split(',').map(function (x) {\n      return x.trim();\n    }).sort();\n  } else {\n    headers.components = [];\n  }\n\n  return headers;\n}\nexport var demoRegexp = /^\"demo\": \"(.*)\"/;\nexport function getContents(markdown) {\n  return markdown.replace(headerRegExp, '') // Remove header information\n  .split(/^{{(\"demo\":[^}]*)}}$/gm) // Split markdown into an array, separating demos\n  .filter(function (content) {\n    return !emptyRegExp.test(content);\n  }); // Remove empty lines\n}\nexport function getTitle(markdown) {\n  var matches = markdown.match(titleRegExp);\n\n  if (!matches || !matches[1]) {\n    throw new Error('Missing title in the page');\n  }\n\n  return matches[1];\n}\nexport function getDescription(markdown) {\n  var matches = markdown.match(descriptionRegExp);\n  return matches === null || matches === void 0 ? void 0 : matches[1];\n}\n/**\n * Render markdown used in the Material-UI docs\n *\n * @param {string} markdown\n * @param {object} [options]\n * @param {function} [options.highlight] - https://marked.js.org/#/USING_ADVANCED.md#highlight\n * @param {object} [options.rest] - properties from https://marked.js.org/#/USING_PRO.md#renderer\n */\n\nexport function render(markdown) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var highlight = options.highlight,\n      rendererOptions = _objectWithoutProperties(options, [\"highlight\"]);\n\n  var renderer = _extends(new marked.Renderer(), rendererOptions);\n\n  var markedOptions = {\n    gfm: true,\n    tables: true,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: true,\n    smartypants: false,\n    highlight: highlight,\n    renderer: renderer\n  };\n  return marked(markdown, markedOptions);\n}\nvar externs = ['https://material.io/', 'https://getbootstrap.com/', 'https://www.amazon.com/', 'https://materialdesignicons.com/', 'https://www.w3.org/', 'https://devexpress.github.io/', 'https://ui-kit.co/'];\n/**\n *\n * @param {object} config\n * @param {() => string} config.requireRaw - returnvalue of require.context\n * @param {string} config.pageFilename - filename relative to nextjs pages directory\n */\n\nexport function prepareMarkdown(config) {\n  var pageFilename = config.pageFilename,\n      requireRaw = config.requireRaw;\n  var demos = {};\n  var docs = {};\n  var headingHashes = {}; // Process the English markdown before the other locales.\n\n  var filenames = [];\n  requireRaw.keys().forEach(function (filename) {\n    if (filename.match(notEnglishMarkdownRegExp)) {\n      filenames.push(filename);\n    } else {\n      filenames = [filename].concat(filenames);\n    }\n  });\n  filenames.forEach(function (filename) {\n    if (filename.indexOf('.md') !== -1) {\n      var matchNotEnglishMarkdown = filename.match(notEnglishMarkdownRegExp);\n      var userLanguage = matchNotEnglishMarkdown && LANGUAGES_IN_PROGRESS.indexOf(matchNotEnglishMarkdown[1]) !== -1 ? matchNotEnglishMarkdown[1] : 'en';\n      var markdown = requireRaw(filename);\n      var headers = getHeaders(markdown);\n      var title = headers.title || getTitle(markdown);\n      var description = headers.description || getDescription(markdown);\n      var contents = getContents(markdown);\n\n      if (headers.components.length > 0) {\n        contents.push(\"\\n## API\\n\\n\".concat(headers.components.map(function (component) {\n          return \"- [`<\".concat(component, \" />`](\").concat(rewriteUrlForNextExport(\"/api/\".concat(kebabCase(component))), \")\");\n        }).join('\\n'), \"\\n  \"));\n      }\n\n      var toc = [];\n      var headingHashesFallbackTranslated = {};\n      var headingIndex = -1;\n      var rendered = contents.map(function (content) {\n        if (demos && demoRegexp.test(content)) {\n          try {\n            return JSON.parse(\"{\".concat(content, \"}\"));\n          } catch (err) {\n            console.error('JSON.parse fails with: ', \"{\".concat(content, \"}\"));\n            console.error(err);\n            return null;\n          }\n        }\n\n        return render(content, {\n          highlight: prism,\n          heading: function heading(headingHtml, level) {\n            // Small title. No need for an anchor.\n            // It's reducing the risk of duplicated id and it's fewer elements in the DOM.\n            if (level >= 4) {\n              return \"<h\".concat(level, \">\").concat(headingHtml, \"</h\").concat(level, \">\");\n            }\n\n            var headingText = headingHtml.replace(/([\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])\\uFE0F?/g, '') // remove emojis\n            .replace(/<\\/?[^>]+(>|$)/g, '') // remove HTML\n            .trim(); // Standardizes the hash from the default location (en) to different locations\n            // Need english.md file parsed first\n\n            var hash;\n\n            if (userLanguage === 'en') {\n              hash = textToHash(headingText, headingHashes);\n            } else {\n              headingIndex += 1;\n              hash = _Object$keys(headingHashes)[headingIndex];\n\n              if (!hash) {\n                hash = textToHash(headingText, headingHashesFallbackTranslated);\n              }\n            } // enable splitting of long words from function name + first arg name\n            // Closing parens are less interesting since this would only allow breaking one character earlier.\n            // Applying the same mechanism would also allow breaking of non-function signatures like \"Community help (free)\".\n            // To detect that we enabled breaking of open/closing parens we'd need a context-sensitive parser.\n\n\n            var displayText = headingText.replace(/([^\\s]\\()/g, '$1&#8203;'); // create a nested structure with 2 levels starting with level 2 e.g.\n            // [{...level2, children: [level3, level3, level3]}, level2]\n\n            if (level === 2) {\n              toc.push({\n                text: displayText,\n                level: level,\n                hash: hash,\n                children: []\n              });\n            } else if (level === 3) {\n              if (!toc[toc.length - 1]) {\n                throw new Error(\"Missing parent level for: \".concat(headingText));\n              }\n\n              toc[toc.length - 1].children.push({\n                text: displayText,\n                level: level,\n                hash: hash\n              });\n            }\n\n            return [\"<h\".concat(level, \">\"), \"<a class=\\\"anchor-link\\\" id=\\\"\".concat(hash, \"\\\"></a>\"), headingHtml, \"<a class=\\\"anchor-link-style\\\" aria-hidden=\\\"true\\\" aria-label=\\\"anchor\\\" href=\\\"#\".concat(hash, \"\\\">\"), '<svg><use xlink:href=\"#anchor-link-icon\" /></svg>', '</a>', \"</h\".concat(level, \">\")].join('');\n          },\n          link: function link(href, linkTitle, linkText) {\n            var more = '';\n\n            if (externs.some(function (domain) {\n              return href.indexOf(domain) !== -1;\n            })) {\n              more = ' target=\"_blank\" rel=\"noopener nofollow\"';\n            }\n\n            var finalHref = href;\n\n            if (userLanguage !== 'en' && finalHref.indexOf('/') === 0 && finalHref !== '/size-snapshot') {\n              finalHref = \"/\".concat(userLanguage).concat(finalHref);\n            }\n\n            return \"<a href=\\\"\".concat(finalHref, \"\\\"\").concat(more, \">\").concat(linkText, \"</a>\");\n          }\n        });\n      }); // fragment link symbol\n\n      rendered.unshift(\"<svg style=\\\"display: none;\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n  <symbol id=\\\"anchor-link-icon\\\" viewBox=\\\"0 0 16 16\\\">\\n    <path d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\" />\\n  </symbol>\\n</svg>\");\n      docs[userLanguage] = {\n        description: description,\n        location: headers.filename || \"/docs/src/pages/\".concat(pageFilename, \"/\").concat(filename),\n        rendered: rendered,\n        toc: toc,\n        title: title\n      };\n    } else if (filename.indexOf('.tsx') !== -1) {\n      var demoName = \"pages/\".concat(pageFilename, \"/\").concat(filename.replace(/\\.\\//g, '').replace(/\\.tsx/g, '.js'));\n      demos[demoName] = _objectSpread(_objectSpread({}, demos[demoName]), {}, {\n        moduleTS: filename,\n        rawTS: requireRaw(filename)\n      });\n    } else {\n      var _demoName = \"pages/\".concat(pageFilename, \"/\").concat(filename.replace(/\\.\\//g, ''));\n\n      demos[_demoName] = _objectSpread(_objectSpread({}, demos[_demoName]), {}, {\n        module: filename,\n        raw: requireRaw(filename)\n      });\n    }\n  });\n  return {\n    demos: demos,\n    docs: docs\n  };\n}","map":{"version":3,"sources":["/home/marcelo.faria/Documentos/b2w/msf-ui/docs/src/modules/utils/parseMarkdown.js"],"names":["headerRegExp","titleRegExp","descriptionRegExp","headerKeyValueRegExp","emptyRegExp","notEnglishMarkdownRegExp","header","markdown","components","headers","regexMatches","x","demoRegexp","matches","options","highlight","rendererOptions","renderer","marked","markedOptions","gfm","tables","breaks","pedantic","sanitize","smartLists","smartypants","externs","pageFilename","requireRaw","config","demos","docs","headingHashes","filenames","filename","matchNotEnglishMarkdown","userLanguage","LANGUAGES_IN_PROGRESS","getHeaders","title","getTitle","description","getDescription","contents","getContents","rewriteUrlForNextExport","kebabCase","toc","headingHashesFallbackTranslated","headingIndex","rendered","JSON","console","render","heading","level","headingText","hash","textToHash","displayText","text","children","link","more","href","finalHref","location","demoName","moduleTS","rawTS","module","raw"],"mappings":"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","sourcesContent":["import marked from 'marked/lib/marked';\nimport { LANGUAGES_IN_PROGRESS } from 'docs/src/modules/constants';\nimport kebabCase from 'lodash/kebabCase';\nimport { rewriteUrlForNextExport } from 'next/dist/next-server/lib/router/rewrite-url-for-export';\nimport textToHash from 'docs/src/modules/utils/textToHash';\nimport prism from 'docs/src/modules/utils/prism';\n\nconst headerRegExp = /---[\\r\\n]([\\s\\S]*)[\\r\\n]---/;\nconst titleRegExp = /# (.*)[\\r\\n]/;\nconst descriptionRegExp = /<p class=\"description\">(.*)<\\/p>[\\r\\n]/;\nconst headerKeyValueRegExp = /(.*): (.*)/g;\nconst emptyRegExp = /^\\s*$/;\nconst notEnglishMarkdownRegExp = /-([a-z]{2})\\.md$/;\n\n/**\n * Extract information from the top of the markdown.\n * For instance, the following input:\n *\n * ---\n * title: Backdrop React Component\n * components: Backdrop\n * ---\n *\n * # Backdrop\n *\n * should output:\n * { title: 'Backdrop React Component', components: ['Backdrop'] }\n */\nexport function getHeaders(markdown) {\n  let header = markdown.match(headerRegExp);\n\n  if (!header) {\n    return {\n      components: [],\n    };\n  }\n\n  header = header[1];\n\n  let regexMatches;\n  const headers = {};\n\n  // eslint-disable-next-line no-cond-assign\n  while ((regexMatches = headerKeyValueRegExp.exec(header)) !== null) {\n    headers[regexMatches[1]] = regexMatches[2];\n  }\n\n  if (headers.components) {\n    headers.components = headers.components\n      .split(',')\n      .map((x) => x.trim())\n      .sort();\n  } else {\n    headers.components = [];\n  }\n\n  return headers;\n}\n\nexport const demoRegexp = /^\"demo\": \"(.*)\"/;\n\nexport function getContents(markdown) {\n  return markdown\n    .replace(headerRegExp, '') // Remove header information\n    .split(/^{{(\"demo\":[^}]*)}}$/gm) // Split markdown into an array, separating demos\n    .filter((content) => !emptyRegExp.test(content)); // Remove empty lines\n}\n\nexport function getTitle(markdown) {\n  const matches = markdown.match(titleRegExp);\n\n  if (!matches || !matches[1]) {\n    throw new Error('Missing title in the page');\n  }\n\n  return matches[1];\n}\n\nexport function getDescription(markdown) {\n  const matches = markdown.match(descriptionRegExp);\n\n  return matches?.[1];\n}\n\n/**\n * Render markdown used in the Material-UI docs\n *\n * @param {string} markdown\n * @param {object} [options]\n * @param {function} [options.highlight] - https://marked.js.org/#/USING_ADVANCED.md#highlight\n * @param {object} [options.rest] - properties from https://marked.js.org/#/USING_PRO.md#renderer\n */\nexport function render(markdown, options = {}) {\n  const { highlight, ...rendererOptions } = options;\n\n  const renderer = Object.assign(new marked.Renderer(), rendererOptions);\n\n  const markedOptions = {\n    gfm: true,\n    tables: true,\n    breaks: false,\n    pedantic: false,\n    sanitize: false,\n    smartLists: true,\n    smartypants: false,\n    highlight,\n    renderer,\n  };\n\n  return marked(markdown, markedOptions);\n}\n\nconst externs = [\n  'https://material.io/',\n  'https://getbootstrap.com/',\n  'https://www.amazon.com/',\n  'https://materialdesignicons.com/',\n  'https://www.w3.org/',\n  'https://devexpress.github.io/',\n  'https://ui-kit.co/',\n];\n\n/**\n *\n * @param {object} config\n * @param {() => string} config.requireRaw - returnvalue of require.context\n * @param {string} config.pageFilename - filename relative to nextjs pages directory\n */\nexport function prepareMarkdown(config) {\n  const { pageFilename, requireRaw } = config;\n\n  const demos = {};\n  const docs = {};\n  const headingHashes = {};\n\n  // Process the English markdown before the other locales.\n  let filenames = [];\n  requireRaw.keys().forEach((filename) => {\n    if (filename.match(notEnglishMarkdownRegExp)) {\n      filenames.push(filename);\n    } else {\n      filenames = [filename].concat(filenames);\n    }\n  });\n\n  filenames.forEach((filename) => {\n    if (filename.indexOf('.md') !== -1) {\n      const matchNotEnglishMarkdown = filename.match(notEnglishMarkdownRegExp);\n\n      const userLanguage =\n        matchNotEnglishMarkdown && LANGUAGES_IN_PROGRESS.indexOf(matchNotEnglishMarkdown[1]) !== -1\n          ? matchNotEnglishMarkdown[1]\n          : 'en';\n\n      const markdown = requireRaw(filename);\n      const headers = getHeaders(markdown);\n      const title = headers.title || getTitle(markdown);\n      const description = headers.description || getDescription(markdown);\n      const contents = getContents(markdown);\n\n      if (headers.components.length > 0) {\n        contents.push(`\n## API\n\n${headers.components\n  .map(\n    (component) =>\n      `- [\\`<${component} />\\`](${rewriteUrlForNextExport(`/api/${kebabCase(component)}`)})`,\n  )\n  .join('\\n')}\n  `);\n      }\n\n      const toc = [];\n      const headingHashesFallbackTranslated = {};\n      let headingIndex = -1;\n\n      const rendered = contents.map((content) => {\n        if (demos && demoRegexp.test(content)) {\n          try {\n            return JSON.parse(`{${content}}`);\n          } catch (err) {\n            console.error('JSON.parse fails with: ', `{${content}}`);\n            console.error(err);\n            return null;\n          }\n        }\n\n        return render(content, {\n          highlight: prism,\n          heading: (headingHtml, level) => {\n            // Small title. No need for an anchor.\n            // It's reducing the risk of duplicated id and it's fewer elements in the DOM.\n            if (level >= 4) {\n              return `<h${level}>${headingHtml}</h${level}>`;\n            }\n\n            const headingText = headingHtml\n              .replace(\n                /([\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])\\uFE0F?/g,\n                '',\n              ) // remove emojis\n              .replace(/<\\/?[^>]+(>|$)/g, '') // remove HTML\n              .trim();\n\n            // Standardizes the hash from the default location (en) to different locations\n            // Need english.md file parsed first\n            let hash;\n            if (userLanguage === 'en') {\n              hash = textToHash(headingText, headingHashes);\n            } else {\n              headingIndex += 1;\n              hash = Object.keys(headingHashes)[headingIndex];\n              if (!hash) {\n                hash = textToHash(headingText, headingHashesFallbackTranslated);\n              }\n            }\n\n            // enable splitting of long words from function name + first arg name\n            // Closing parens are less interesting since this would only allow breaking one character earlier.\n            // Applying the same mechanism would also allow breaking of non-function signatures like \"Community help (free)\".\n            // To detect that we enabled breaking of open/closing parens we'd need a context-sensitive parser.\n            const displayText = headingText.replace(/([^\\s]\\()/g, '$1&#8203;');\n\n            // create a nested structure with 2 levels starting with level 2 e.g.\n            // [{...level2, children: [level3, level3, level3]}, level2]\n            if (level === 2) {\n              toc.push({\n                text: displayText,\n                level,\n                hash,\n                children: [],\n              });\n            } else if (level === 3) {\n              if (!toc[toc.length - 1]) {\n                throw new Error(`Missing parent level for: ${headingText}`);\n              }\n\n              toc[toc.length - 1].children.push({\n                text: displayText,\n                level,\n                hash,\n              });\n            }\n\n            return [\n              `<h${level}>`,\n              `<a class=\"anchor-link\" id=\"${hash}\"></a>`,\n              headingHtml,\n              `<a class=\"anchor-link-style\" aria-hidden=\"true\" aria-label=\"anchor\" href=\"#${hash}\">`,\n              '<svg><use xlink:href=\"#anchor-link-icon\" /></svg>',\n              '</a>',\n              `</h${level}>`,\n            ].join('');\n          },\n          link: (href, linkTitle, linkText) => {\n            let more = '';\n\n            if (externs.some((domain) => href.indexOf(domain) !== -1)) {\n              more = ' target=\"_blank\" rel=\"noopener nofollow\"';\n            }\n\n            let finalHref = href;\n\n            if (\n              userLanguage !== 'en' &&\n              finalHref.indexOf('/') === 0 &&\n              finalHref !== '/size-snapshot'\n            ) {\n              finalHref = `/${userLanguage}${finalHref}`;\n            }\n\n            return `<a href=\"${finalHref}\"${more}>${linkText}</a>`;\n          },\n        });\n      });\n\n      // fragment link symbol\n      rendered.unshift(`<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n  <symbol id=\"anchor-link-icon\" viewBox=\"0 0 16 16\">\n    <path d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\" />\n  </symbol>\n</svg>`);\n\n      docs[userLanguage] = {\n        description,\n        location: headers.filename || `/docs/src/pages/${pageFilename}/${filename}`,\n        rendered,\n        toc,\n        title,\n      };\n    } else if (filename.indexOf('.tsx') !== -1) {\n      const demoName = `pages/${pageFilename}/${filename\n        .replace(/\\.\\//g, '')\n        .replace(/\\.tsx/g, '.js')}`;\n\n      demos[demoName] = {\n        ...demos[demoName],\n        moduleTS: filename,\n        rawTS: requireRaw(filename),\n      };\n    } else {\n      const demoName = `pages/${pageFilename}/${filename.replace(/\\.\\//g, '')}`;\n\n      demos[demoName] = {\n        ...demos[demoName],\n        module: filename,\n        raw: requireRaw(filename),\n      };\n    }\n  });\n\n  return { demos, docs };\n}\n"]},"metadata":{},"sourceType":"module"}