{"ast":null,"code":"import React from 'react';\nimport { pathnameToLanguage } from \"../utils/helpers\"; // So we can write code like:\n//\n// <Button\n//   ga-event-category=\"demo\"\n//   ga-event-action=\"expand\"\n// >\n//   Foo\n// </Button>\n\nfunction handleClick(event) {\n  var element = event.target;\n\n  while (element && element !== document) {\n    var category = element.getAttribute('data-ga-event-category'); // We reach a tracking element, no need to look higher in the dom tree.\n\n    if (category) {\n      window.ga('send', {\n        hitType: 'event',\n        eventCategory: category,\n        eventAction: element.getAttribute('data-ga-event-action'),\n        eventLabel: element.getAttribute('data-ga-event-label'),\n        eventValue: element.getAttribute('data-ga-event-value')\n      });\n      break;\n    }\n\n    element = element.parentElement;\n  }\n}\n\nvar bound = false;\nexport default function GoogleAnalytics() {\n  React.useEffect(function () {\n    // Wait for the title to be updated.\n    setTimeout(function () {\n      var _pathnameToLanguage = pathnameToLanguage(window.location.pathname),\n          canonical = _pathnameToLanguage.canonical;\n\n      window.ga('set', {\n        page: canonical\n      });\n      window.ga('send', {\n        hitType: 'pageview'\n      });\n    });\n\n    if (bound) {\n      return;\n    }\n\n    bound = true;\n    document.addEventListener('click', handleClick);\n  }, []);\n  return null;\n}","map":null,"metadata":{},"sourceType":"module"}