{"ast":null,"code":"function makeUnique(hash, unique) {\n  var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var uniqueHash = i === 1 ? hash : \"\".concat(hash, \"-\").concat(i);\n\n  if (!unique[uniqueHash]) {\n    unique[uniqueHash] = true;\n    return uniqueHash;\n  }\n\n  return makeUnique(hash, unique, i + 1);\n}\n/**\n * @param {string} text - HTML from e.g. parseMarkdown#render\n * @param {Record<string, boolean>} [unique] - Ensures that each output is unique in `unique`\n * @returns {string} that is safe to use in fragment links\n */\n\n\nexport default function textToHash(text) {\n  var unique = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return makeUnique(encodeURI(text.toLowerCase().replace(/<\\/?[^>]+(>|$)/g, '') // remove HTML\n  .replace(/=&gt;|&lt;| \\/&gt;|<code>|<\\/code>|&#39;/g, '').replace(/[!@#$%^&*()=_+[\\]{}`~;:'\"|,.<>/?\\s]+/g, '-').replace(/([\\uE000-\\uF8FF]|\\uD83C[\\uDC00-\\uDFFF]|\\uD83D[\\uDC00-\\uDFFF]|[\\u2011-\\u26FF]|\\uD83E[\\uDD10-\\uDDFF])\\uFE0F?/g, '') // remove emojis\n  .replace(/-+/g, '-').replace(/^-|-$/g, '')), unique);\n}","map":null,"metadata":{},"sourceType":"module"}