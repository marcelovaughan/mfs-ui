{"ast":null,"code":"var _jsxFileName = \"/home/marcelo.faria/Documentos/b2w/msf-ui/docs/src/modules/components/AppTableOfContents.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/* eslint-disable react/no-danger */\n\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash/throttle';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { makeStyles } from \"../../../../packages/material-ui/src/styles\";\nimport Typography from \"../../../../packages/material-ui/src/Typography\";\nimport NoSsr from \"../../../../packages/material-ui/src/NoSsr\";\nimport Link from \"./Link\";\nimport PageContext from \"./PageContext\";\nimport Ad from \"./Ad\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    top: 70,\n    // Fix IE 11 position sticky issue.\n    marginTop: 70,\n    width: 175,\n    flexShrink: 0,\n    position: 'sticky',\n    height: 'calc(100vh - 70px)',\n    overflowY: 'auto',\n    padding: theme.spacing(2, 2, 2, 0),\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block'\n    }\n  },\n  contents: {\n    marginTop: theme.spacing(2),\n    paddingLeft: theme.spacing(1)\n  },\n  ul: {\n    padding: 0,\n    margin: 0,\n    listStyle: 'none'\n  },\n  item: {\n    fontSize: '.8125rem',\n    padding: theme.spacing(0.5, 0, 0.5, `${Math.max(0, theme.spacing(1) - 3)}px`),\n    borderLeft: `3px solid transparent`,\n    boxSizing: 'border-box',\n    '&:hover': {\n      borderLeftColor: theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[900]\n    },\n    '&$active,&:active': {\n      borderLeftColor: theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[800]\n    }\n  },\n  secondaryItem: {\n    paddingLeft: theme.spacing(2.5)\n  },\n  active: {}\n})); // TODO: these nodes are mutable sources. Use createMutableSource once it's stable\n\nfunction getItemsClient(headings) {\n  const itemsWithNode = [];\n  headings.forEach(item => {\n    itemsWithNode.push(_objectSpread(_objectSpread({}, item), {}, {\n      node: document.getElementById(item.hash)\n    }));\n\n    if (item.children.length > 0) {\n      item.children.forEach(subitem => {\n        itemsWithNode.push(_objectSpread(_objectSpread({}, subitem), {}, {\n          node: document.getElementById(subitem.hash)\n        }));\n      });\n    }\n  });\n  return itemsWithNode;\n}\n\nconst noop = () => {};\n\nfunction useThrottledOnScroll(callback, delay) {\n  const throttledCallback = React.useMemo(() => callback ? throttle(callback, delay) : noop, [callback, delay]);\n  React.useEffect(() => {\n    if (throttledCallback === noop) {\n      return undefined;\n    }\n\n    window.addEventListener('scroll', throttledCallback);\n    return () => {\n      window.removeEventListener('scroll', throttledCallback);\n      throttledCallback.cancel();\n    };\n  }, [throttledCallback]);\n}\n\nexport default function AppTableOfContents(props) {\n  const {\n    items\n  } = props;\n  const classes = useStyles();\n  const t = useSelector(state => state.options.t);\n  const itemsWithNodeRef = React.useRef([]);\n  React.useEffect(() => {\n    itemsWithNodeRef.current = getItemsClient(items);\n  }, [items]);\n  const {\n    activePage\n  } = React.useContext(PageContext);\n  const [activeState, setActiveState] = React.useState(null);\n  const clickedRef = React.useRef(false);\n  const unsetClickedRef = React.useRef(null);\n  const findActiveIndex = React.useCallback(() => {\n    // Don't set the active index based on scroll if a link was just clicked\n    if (clickedRef.current) {\n      return;\n    }\n\n    let active;\n\n    for (let i = itemsWithNodeRef.current.length - 1; i >= 0; i -= 1) {\n      // No hash if we're near the top of the page\n      if (document.documentElement.scrollTop < 200) {\n        active = {\n          hash: null\n        };\n        break;\n      }\n\n      const item = itemsWithNodeRef.current[i];\n\n      if (true) {\n        if (!item.node) {\n          console.error(`Missing node on the item ${JSON.stringify(item, null, 2)}`);\n        }\n      }\n\n      if (item.node && item.node.offsetTop < document.documentElement.scrollTop + document.documentElement.clientHeight / 8) {\n        active = item;\n        break;\n      }\n    }\n\n    if (active && activeState !== active.hash) {\n      setActiveState(active.hash);\n    }\n  }, [activeState]); // Corresponds to 10 frames at 60 Hz\n\n  useThrottledOnScroll(items.length > 0 ? findActiveIndex : null, 166);\n\n  const handleClick = hash => event => {\n    // Ignore click for new tab/new window behavior\n    if (event.defaultPrevented || event.button !== 0 || // ignore everything but left-click\n    event.metaKey || event.ctrlKey || event.altKey || event.shiftKey) {\n      return;\n    } // Used to disable findActiveIndex if the page scrolls due to a click\n\n\n    clickedRef.current = true;\n    unsetClickedRef.current = setTimeout(() => {\n      clickedRef.current = false;\n    }, 1000);\n\n    if (activeState !== hash) {\n      setActiveState(hash);\n    }\n  };\n\n  React.useEffect(() => () => {\n    clearTimeout(unsetClickedRef.current);\n  }, []);\n\n  const itemLink = (item, secondary) => __jsx(Link, {\n    display: \"block\",\n    color: activeState === item.hash ? 'textPrimary' : 'textSecondary',\n    href: `${activePage.pathname}#${item.hash}`,\n    underline: \"none\",\n    onClick: handleClick(item.hash),\n    className: clsx(classes.item, secondary && classes.secondaryItem, activeState === item.hash && classes.active),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }\n  }, __jsx(\"span\", {\n    dangerouslySetInnerHTML: {\n      __html: item.text\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }));\n\n  return __jsx(\"nav\", {\n    className: classes.root,\n    \"aria-label\": t('pageTOC'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 5\n    }\n  }, __jsx(NoSsr, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }, __jsx(Ad, {\n    placement: \"tocs-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  })), items.length > 0 ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    gutterBottom: true,\n    className: classes.contents,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, t('tableOfContents')), __jsx(Typography, {\n    component: \"ul\",\n    className: classes.ul,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 11\n    }\n  }, items.map(item => __jsx(\"li\", {\n    key: item.text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 15\n    }\n  }, itemLink(item), item.children.length > 0 ? __jsx(\"ul\", {\n    className: classes.ul,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  }, item.children.map(subitem => __jsx(\"li\", {\n    key: subitem.text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 23\n    }\n  }, itemLink(subitem, true)))) : null)))) : null, __jsx(NoSsr, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }\n  }, __jsx(Ad, {\n    placement: \"tocs-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  })));\n}\nAppTableOfContents.propTypes = {\n  items: PropTypes.array.isRequired\n};","map":{"version":3,"sources":["/home/marcelo.faria/Documentos/b2w/msf-ui/docs/src/modules/components/AppTableOfContents.js"],"names":["useStyles","makeStyles","theme","root","top","marginTop","width","flexShrink","position","height","overflowY","padding","display","contents","paddingLeft","ul","margin","listStyle","item","fontSize","Math","borderLeft","boxSizing","borderLeftColor","secondaryItem","active","itemsWithNode","headings","node","document","subitem","noop","throttledCallback","React","callback","throttle","window","items","classes","t","useSelector","state","itemsWithNodeRef","getItemsClient","activePage","clickedRef","unsetClickedRef","findActiveIndex","i","hash","console","JSON","activeState","setActiveState","useThrottledOnScroll","handleClick","event","setTimeout","clearTimeout","itemLink","pathname","clsx","__html","text","AppTableOfContents","PropTypes","isRequired"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-danger */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash/throttle';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport Link from 'docs/src/modules/components/Link';\nimport PageContext from 'docs/src/modules/components/PageContext';\nimport Ad from 'docs/src/modules/components/Ad';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    top: 70,\n    // Fix IE 11 position sticky issue.\n    marginTop: 70,\n    width: 175,\n    flexShrink: 0,\n    position: 'sticky',\n    height: 'calc(100vh - 70px)',\n    overflowY: 'auto',\n    padding: theme.spacing(2, 2, 2, 0),\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block',\n    },\n  },\n  contents: {\n    marginTop: theme.spacing(2),\n    paddingLeft: theme.spacing(1),\n  },\n  ul: {\n    padding: 0,\n    margin: 0,\n    listStyle: 'none',\n  },\n  item: {\n    fontSize: '.8125rem',\n    padding: theme.spacing(0.5, 0, 0.5, `${Math.max(0, theme.spacing(1) - 3)}px`),\n    borderLeft: `3px solid transparent`,\n    boxSizing: 'border-box',\n    '&:hover': {\n      borderLeftColor:\n        theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[900],\n    },\n    '&$active,&:active': {\n      borderLeftColor:\n        theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[800],\n    },\n  },\n  secondaryItem: {\n    paddingLeft: theme.spacing(2.5),\n  },\n  active: {},\n}));\n\n// TODO: these nodes are mutable sources. Use createMutableSource once it's stable\nfunction getItemsClient(headings) {\n  const itemsWithNode = [];\n\n  headings.forEach((item) => {\n    itemsWithNode.push({\n      ...item,\n      node: document.getElementById(item.hash),\n    });\n\n    if (item.children.length > 0) {\n      item.children.forEach((subitem) => {\n        itemsWithNode.push({\n          ...subitem,\n          node: document.getElementById(subitem.hash),\n        });\n      });\n    }\n  });\n  return itemsWithNode;\n}\n\nconst noop = () => {};\n\nfunction useThrottledOnScroll(callback, delay) {\n  const throttledCallback = React.useMemo(() => (callback ? throttle(callback, delay) : noop), [\n    callback,\n    delay,\n  ]);\n\n  React.useEffect(() => {\n    if (throttledCallback === noop) {\n      return undefined;\n    }\n\n    window.addEventListener('scroll', throttledCallback);\n    return () => {\n      window.removeEventListener('scroll', throttledCallback);\n      throttledCallback.cancel();\n    };\n  }, [throttledCallback]);\n}\n\nexport default function AppTableOfContents(props) {\n  const { items } = props;\n  const classes = useStyles();\n  const t = useSelector((state) => state.options.t);\n\n  const itemsWithNodeRef = React.useRef([]);\n  React.useEffect(() => {\n    itemsWithNodeRef.current = getItemsClient(items);\n  }, [items]);\n\n  const { activePage } = React.useContext(PageContext);\n  const [activeState, setActiveState] = React.useState(null);\n  const clickedRef = React.useRef(false);\n  const unsetClickedRef = React.useRef(null);\n  const findActiveIndex = React.useCallback(() => {\n    // Don't set the active index based on scroll if a link was just clicked\n    if (clickedRef.current) {\n      return;\n    }\n\n    let active;\n    for (let i = itemsWithNodeRef.current.length - 1; i >= 0; i -= 1) {\n      // No hash if we're near the top of the page\n      if (document.documentElement.scrollTop < 200) {\n        active = { hash: null };\n        break;\n      }\n\n      const item = itemsWithNodeRef.current[i];\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!item.node) {\n          console.error(`Missing node on the item ${JSON.stringify(item, null, 2)}`);\n        }\n      }\n\n      if (\n        item.node &&\n        item.node.offsetTop <\n          document.documentElement.scrollTop + document.documentElement.clientHeight / 8\n      ) {\n        active = item;\n        break;\n      }\n    }\n\n    if (active && activeState !== active.hash) {\n      setActiveState(active.hash);\n    }\n  }, [activeState]);\n\n  // Corresponds to 10 frames at 60 Hz\n  useThrottledOnScroll(items.length > 0 ? findActiveIndex : null, 166);\n\n  const handleClick = (hash) => (event) => {\n    // Ignore click for new tab/new window behavior\n    if (\n      event.defaultPrevented ||\n      event.button !== 0 || // ignore everything but left-click\n      event.metaKey ||\n      event.ctrlKey ||\n      event.altKey ||\n      event.shiftKey\n    ) {\n      return;\n    }\n\n    // Used to disable findActiveIndex if the page scrolls due to a click\n    clickedRef.current = true;\n    unsetClickedRef.current = setTimeout(() => {\n      clickedRef.current = false;\n    }, 1000);\n\n    if (activeState !== hash) {\n      setActiveState(hash);\n    }\n  };\n\n  React.useEffect(\n    () => () => {\n      clearTimeout(unsetClickedRef.current);\n    },\n    [],\n  );\n\n  const itemLink = (item, secondary) => (\n    <Link\n      display=\"block\"\n      color={activeState === item.hash ? 'textPrimary' : 'textSecondary'}\n      href={`${activePage.pathname}#${item.hash}`}\n      underline=\"none\"\n      onClick={handleClick(item.hash)}\n      className={clsx(\n        classes.item,\n        { [classes.secondaryItem]: secondary },\n        activeState === item.hash ? classes.active : undefined,\n      )}\n    >\n      <span dangerouslySetInnerHTML={{ __html: item.text }} />\n    </Link>\n  );\n\n  return (\n    <nav className={classes.root} aria-label={t('pageTOC')}>\n      <NoSsr>\n        <Ad placement=\"tocs-top\" />\n      </NoSsr>\n      {items.length > 0 ? (\n        <React.Fragment>\n          <Typography gutterBottom className={classes.contents}>\n            {t('tableOfContents')}\n          </Typography>\n          <Typography component=\"ul\" className={classes.ul}>\n            {items.map((item) => (\n              <li key={item.text}>\n                {itemLink(item)}\n                {item.children.length > 0 ? (\n                  <ul className={classes.ul}>\n                    {item.children.map((subitem) => (\n                      <li key={subitem.text}>{itemLink(subitem, true)}</li>\n                    ))}\n                  </ul>\n                ) : null}\n              </li>\n            ))}\n          </Typography>\n        </React.Fragment>\n      ) : null}\n      <NoSsr>\n        <Ad placement=\"tocs-bottom\" />\n      </NoSsr>\n    </nav>\n  );\n}\n\nAppTableOfContents.propTypes = {\n  items: PropTypes.array.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}