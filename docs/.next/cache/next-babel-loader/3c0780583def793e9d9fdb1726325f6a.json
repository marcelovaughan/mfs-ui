{"ast":null,"code":"function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { getDynamicStyles } from 'jss';\nimport mergeClasses from \"../mergeClasses\";\nimport multiKeyStore from \"./multiKeyStore\";\nimport useTheme from \"../useTheme\";\nimport { StylesContext } from \"../StylesProvider\";\nimport { increment } from \"./indexCounter\";\nimport getStylesCreator from \"../getStylesCreator\";\nimport noopTheme from \"../getStylesCreator/noopTheme\";\n\nfunction getClasses({\n  state,\n  stylesOptions\n}, classes, Component) {\n  if (stylesOptions.disableGeneration) {\n    return classes || {};\n  }\n\n  if (!state.cacheClasses) {\n    state.cacheClasses = {\n      // Cache for the finalized classes value.\n      value: null,\n      // Cache for the last used classes prop pointer.\n      lastProp: null,\n      // Cache for the last used rendered classes pointer.\n      lastJSS: {}\n    };\n  } // Tracks if either the rendered classes or classes prop has changed,\n  // requiring the generation of a new finalized classes object.\n\n\n  let generate = false;\n\n  if (state.classes !== state.cacheClasses.lastJSS) {\n    state.cacheClasses.lastJSS = state.classes;\n    generate = true;\n  }\n\n  if (classes !== state.cacheClasses.lastProp) {\n    state.cacheClasses.lastProp = classes;\n    generate = true;\n  }\n\n  if (generate) {\n    state.cacheClasses.value = mergeClasses({\n      baseClasses: state.cacheClasses.lastJSS,\n      newClasses: classes,\n      Component\n    });\n  }\n\n  return state.cacheClasses.value;\n}\n\nfunction attach({\n  state,\n  theme,\n  stylesOptions,\n  stylesCreator,\n  name\n}, props) {\n  if (stylesOptions.disableGeneration) {\n    return;\n  }\n\n  let sheetManager = multiKeyStore.get(stylesOptions.sheetsManager, stylesCreator, theme);\n\n  if (!sheetManager) {\n    sheetManager = {\n      refs: 0,\n      staticSheet: null,\n      dynamicStyles: null\n    };\n    multiKeyStore.set(stylesOptions.sheetsManager, stylesCreator, theme, sheetManager);\n  }\n\n  const options = _objectSpread(_objectSpread(_objectSpread({}, stylesCreator.options), stylesOptions), {}, {\n    theme,\n    flip: typeof stylesOptions.flip === 'boolean' ? stylesOptions.flip : theme.direction === 'rtl'\n  });\n\n  options.generateId = options.serverGenerateClassName || options.generateClassName;\n  const sheetsRegistry = stylesOptions.sheetsRegistry;\n\n  if (sheetManager.refs === 0) {\n    let staticSheet;\n\n    if (stylesOptions.sheetsCache) {\n      staticSheet = multiKeyStore.get(stylesOptions.sheetsCache, stylesCreator, theme);\n    }\n\n    const styles = stylesCreator.create(theme, name);\n\n    if (!staticSheet) {\n      staticSheet = stylesOptions.jss.createStyleSheet(styles, _objectSpread({\n        link: false\n      }, options));\n      staticSheet.attach();\n\n      if (stylesOptions.sheetsCache) {\n        multiKeyStore.set(stylesOptions.sheetsCache, stylesCreator, theme, staticSheet);\n      }\n    }\n\n    if (sheetsRegistry) {\n      sheetsRegistry.add(staticSheet);\n    }\n\n    sheetManager.staticSheet = staticSheet;\n    sheetManager.dynamicStyles = getDynamicStyles(styles);\n  }\n\n  if (sheetManager.dynamicStyles) {\n    const dynamicSheet = stylesOptions.jss.createStyleSheet(sheetManager.dynamicStyles, _objectSpread({\n      link: true\n    }, options));\n    dynamicSheet.update(props);\n    dynamicSheet.attach();\n    state.dynamicSheet = dynamicSheet;\n    state.classes = mergeClasses({\n      baseClasses: sheetManager.staticSheet.classes,\n      newClasses: dynamicSheet.classes\n    });\n\n    if (sheetsRegistry) {\n      sheetsRegistry.add(dynamicSheet);\n    }\n  } else {\n    state.classes = sheetManager.staticSheet.classes;\n  }\n\n  sheetManager.refs += 1;\n}\n\nfunction update({\n  state\n}, props) {\n  if (state.dynamicSheet) {\n    state.dynamicSheet.update(props);\n  }\n}\n\nfunction detach({\n  state,\n  theme,\n  stylesOptions,\n  stylesCreator\n}) {\n  if (stylesOptions.disableGeneration) {\n    return;\n  }\n\n  const sheetManager = multiKeyStore.get(stylesOptions.sheetsManager, stylesCreator, theme);\n  sheetManager.refs -= 1;\n  const sheetsRegistry = stylesOptions.sheetsRegistry;\n\n  if (sheetManager.refs === 0) {\n    multiKeyStore.delete(stylesOptions.sheetsManager, stylesCreator, theme);\n    stylesOptions.jss.removeStyleSheet(sheetManager.staticSheet);\n\n    if (sheetsRegistry) {\n      sheetsRegistry.remove(sheetManager.staticSheet);\n    }\n  }\n\n  if (state.dynamicSheet) {\n    stylesOptions.jss.removeStyleSheet(state.dynamicSheet);\n\n    if (sheetsRegistry) {\n      sheetsRegistry.remove(state.dynamicSheet);\n    }\n  }\n}\n\nfunction useSynchronousEffect(func, values) {\n  const key = React.useRef([]);\n  let output; // Store \"generation\" key. Just returns a new object every time\n\n  const currentKey = React.useMemo(() => ({}), values); // eslint-disable-line react-hooks/exhaustive-deps\n  // \"the first render\", or \"memo dropped the value\"\n\n  if (key.current !== currentKey) {\n    key.current = currentKey;\n    output = func();\n  }\n\n  React.useEffect(() => () => {\n    if (output) {\n      output();\n    }\n  }, [currentKey] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n}\n\nexport default function makeStyles(stylesOrCreator, options = {}) {\n  const {\n    // alias for classNamePrefix, if provided will listen to theme (required for theme.overrides)\n    name,\n    // Help with debuggability.\n    classNamePrefix: classNamePrefixOption,\n    Component,\n    defaultTheme = noopTheme\n  } = options,\n        stylesOptions2 = _objectWithoutProperties(options, [\"name\", \"classNamePrefix\", \"Component\", \"defaultTheme\"]);\n\n  const stylesCreator = getStylesCreator(stylesOrCreator);\n  const classNamePrefix = name || classNamePrefixOption || 'makeStyles';\n  stylesCreator.options = {\n    index: increment(),\n    name,\n    meta: classNamePrefix,\n    classNamePrefix\n  };\n\n  const useStyles = (props = {}) => {\n    const theme = useTheme() || defaultTheme;\n\n    const stylesOptions = _objectSpread(_objectSpread({}, React.useContext(StylesContext)), stylesOptions2);\n\n    const instance = React.useRef();\n    const shouldUpdate = React.useRef();\n    useSynchronousEffect(() => {\n      const current = {\n        name,\n        state: {},\n        stylesCreator,\n        stylesOptions,\n        theme\n      };\n      attach(current, props);\n      shouldUpdate.current = false;\n      instance.current = current;\n      return () => {\n        detach(current);\n      };\n    }, [theme, stylesCreator]);\n    React.useEffect(() => {\n      if (shouldUpdate.current) {\n        update(instance.current, props);\n      }\n\n      shouldUpdate.current = true;\n    });\n    const classes = getClasses(instance.current, props.classes, Component);\n\n    if (true) {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      React.useDebugValue(classes);\n    }\n\n    return classes;\n  };\n\n  return useStyles;\n}","map":{"version":3,"sources":["/home/marcelo.faria/Documentos/b2w/msf-ui/packages/material-ui-styles/src/makeStyles/makeStyles.js"],"names":["React","getDynamicStyles","mergeClasses","multiKeyStore","useTheme","StylesContext","increment","getStylesCreator","noopTheme","getClasses","state","stylesOptions","classes","Component","disableGeneration","cacheClasses","value","lastProp","lastJSS","generate","baseClasses","newClasses","attach","theme","stylesCreator","name","props","sheetManager","get","sheetsManager","refs","staticSheet","dynamicStyles","set","options","flip","direction","generateId","serverGenerateClassName","generateClassName","sheetsRegistry","sheetsCache","styles","create","jss","createStyleSheet","link","add","dynamicSheet","update","detach","delete","removeStyleSheet","remove","useSynchronousEffect","func","values","key","useRef","output","currentKey","useMemo","current","useEffect","makeStyles","stylesOrCreator","classNamePrefix","classNamePrefixOption","defaultTheme","stylesOptions2","index","meta","useStyles","useContext","instance","shouldUpdate","useDebugValue"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { getDynamicStyles } from 'jss';\nimport mergeClasses from '../mergeClasses';\nimport multiKeyStore from './multiKeyStore';\nimport useTheme from '../useTheme';\nimport { StylesContext } from '../StylesProvider';\nimport { increment } from './indexCounter';\nimport getStylesCreator from '../getStylesCreator';\nimport noopTheme from '../getStylesCreator/noopTheme';\n\nfunction getClasses({ state, stylesOptions }, classes, Component) {\n  if (stylesOptions.disableGeneration) {\n    return classes || {};\n  }\n\n  if (!state.cacheClasses) {\n    state.cacheClasses = {\n      // Cache for the finalized classes value.\n      value: null,\n      // Cache for the last used classes prop pointer.\n      lastProp: null,\n      // Cache for the last used rendered classes pointer.\n      lastJSS: {},\n    };\n  }\n\n  // Tracks if either the rendered classes or classes prop has changed,\n  // requiring the generation of a new finalized classes object.\n  let generate = false;\n\n  if (state.classes !== state.cacheClasses.lastJSS) {\n    state.cacheClasses.lastJSS = state.classes;\n    generate = true;\n  }\n  if (classes !== state.cacheClasses.lastProp) {\n    state.cacheClasses.lastProp = classes;\n    generate = true;\n  }\n\n  if (generate) {\n    state.cacheClasses.value = mergeClasses({\n      baseClasses: state.cacheClasses.lastJSS,\n      newClasses: classes,\n      Component,\n    });\n  }\n\n  return state.cacheClasses.value;\n}\n\nfunction attach({ state, theme, stylesOptions, stylesCreator, name }, props) {\n  if (stylesOptions.disableGeneration) {\n    return;\n  }\n\n  let sheetManager = multiKeyStore.get(stylesOptions.sheetsManager, stylesCreator, theme);\n\n  if (!sheetManager) {\n    sheetManager = {\n      refs: 0,\n      staticSheet: null,\n      dynamicStyles: null,\n    };\n    multiKeyStore.set(stylesOptions.sheetsManager, stylesCreator, theme, sheetManager);\n  }\n\n  const options = {\n    ...stylesCreator.options,\n    ...stylesOptions,\n    theme,\n    flip: typeof stylesOptions.flip === 'boolean' ? stylesOptions.flip : theme.direction === 'rtl',\n  };\n  options.generateId = options.serverGenerateClassName || options.generateClassName;\n\n  const sheetsRegistry = stylesOptions.sheetsRegistry;\n\n  if (sheetManager.refs === 0) {\n    let staticSheet;\n\n    if (stylesOptions.sheetsCache) {\n      staticSheet = multiKeyStore.get(stylesOptions.sheetsCache, stylesCreator, theme);\n    }\n\n    const styles = stylesCreator.create(theme, name);\n\n    if (!staticSheet) {\n      staticSheet = stylesOptions.jss.createStyleSheet(styles, {\n        link: false,\n        ...options,\n      });\n      staticSheet.attach();\n\n      if (stylesOptions.sheetsCache) {\n        multiKeyStore.set(stylesOptions.sheetsCache, stylesCreator, theme, staticSheet);\n      }\n    }\n\n    if (sheetsRegistry) {\n      sheetsRegistry.add(staticSheet);\n    }\n\n    sheetManager.staticSheet = staticSheet;\n    sheetManager.dynamicStyles = getDynamicStyles(styles);\n  }\n\n  if (sheetManager.dynamicStyles) {\n    const dynamicSheet = stylesOptions.jss.createStyleSheet(sheetManager.dynamicStyles, {\n      link: true,\n      ...options,\n    });\n\n    dynamicSheet.update(props);\n    dynamicSheet.attach();\n\n    state.dynamicSheet = dynamicSheet;\n    state.classes = mergeClasses({\n      baseClasses: sheetManager.staticSheet.classes,\n      newClasses: dynamicSheet.classes,\n    });\n\n    if (sheetsRegistry) {\n      sheetsRegistry.add(dynamicSheet);\n    }\n  } else {\n    state.classes = sheetManager.staticSheet.classes;\n  }\n\n  sheetManager.refs += 1;\n}\n\nfunction update({ state }, props) {\n  if (state.dynamicSheet) {\n    state.dynamicSheet.update(props);\n  }\n}\n\nfunction detach({ state, theme, stylesOptions, stylesCreator }) {\n  if (stylesOptions.disableGeneration) {\n    return;\n  }\n\n  const sheetManager = multiKeyStore.get(stylesOptions.sheetsManager, stylesCreator, theme);\n  sheetManager.refs -= 1;\n  const sheetsRegistry = stylesOptions.sheetsRegistry;\n\n  if (sheetManager.refs === 0) {\n    multiKeyStore.delete(stylesOptions.sheetsManager, stylesCreator, theme);\n    stylesOptions.jss.removeStyleSheet(sheetManager.staticSheet);\n    if (sheetsRegistry) {\n      sheetsRegistry.remove(sheetManager.staticSheet);\n    }\n  }\n\n  if (state.dynamicSheet) {\n    stylesOptions.jss.removeStyleSheet(state.dynamicSheet);\n    if (sheetsRegistry) {\n      sheetsRegistry.remove(state.dynamicSheet);\n    }\n  }\n}\n\nfunction useSynchronousEffect(func, values) {\n  const key = React.useRef([]);\n  let output;\n\n  // Store \"generation\" key. Just returns a new object every time\n  const currentKey = React.useMemo(() => ({}), values); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // \"the first render\", or \"memo dropped the value\"\n  if (key.current !== currentKey) {\n    key.current = currentKey;\n    output = func();\n  }\n\n  React.useEffect(\n    () => () => {\n      if (output) {\n        output();\n      }\n    },\n    [currentKey], // eslint-disable-line react-hooks/exhaustive-deps\n  );\n}\n\nexport default function makeStyles(stylesOrCreator, options = {}) {\n  const {\n    // alias for classNamePrefix, if provided will listen to theme (required for theme.overrides)\n    name,\n    // Help with debuggability.\n    classNamePrefix: classNamePrefixOption,\n    Component,\n    defaultTheme = noopTheme,\n    ...stylesOptions2\n  } = options;\n  const stylesCreator = getStylesCreator(stylesOrCreator);\n  const classNamePrefix = name || classNamePrefixOption || 'makeStyles';\n  stylesCreator.options = {\n    index: increment(),\n    name,\n    meta: classNamePrefix,\n    classNamePrefix,\n  };\n\n  const useStyles = (props = {}) => {\n    const theme = useTheme() || defaultTheme;\n    const stylesOptions = {\n      ...React.useContext(StylesContext),\n      ...stylesOptions2,\n    };\n\n    const instance = React.useRef();\n    const shouldUpdate = React.useRef();\n\n    useSynchronousEffect(() => {\n      const current = {\n        name,\n        state: {},\n        stylesCreator,\n        stylesOptions,\n        theme,\n      };\n\n      attach(current, props);\n\n      shouldUpdate.current = false;\n      instance.current = current;\n      return () => {\n        detach(current);\n      };\n    }, [theme, stylesCreator]);\n\n    React.useEffect(() => {\n      if (shouldUpdate.current) {\n        update(instance.current, props);\n      }\n      shouldUpdate.current = true;\n    });\n\n    const classes = getClasses(instance.current, props.classes, Component);\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      React.useDebugValue(classes);\n    }\n\n    return classes;\n  };\n\n  return useStyles;\n}\n"]},"metadata":{},"sourceType":"module"}