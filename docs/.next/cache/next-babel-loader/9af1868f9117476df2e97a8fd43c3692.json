{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/marcelo.faria/Documentos/b2w/msf-ui/docs/src/modules/components/AppTableOfContents.js\";\nvar __jsx = React.createElement;\n\n/* eslint-disable react/no-danger */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash/throttle';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { makeStyles } from \"../../../../packages/material-ui/src/styles\";\nimport Typography from \"../../../../packages/material-ui/src/Typography\";\nimport NoSsr from \"../../../../packages/material-ui/src/NoSsr\";\nimport Link from \"./Link\";\nimport PageContext from \"./PageContext\";\nimport Ad from \"./Ad\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: _defineProperty({\n      top: 70,\n      // Fix IE 11 position sticky issue.\n      marginTop: 70,\n      width: 175,\n      flexShrink: 0,\n      position: 'sticky',\n      height: 'calc(100vh - 70px)',\n      overflowY: 'auto',\n      padding: theme.spacing(2, 2, 2, 0),\n      display: 'none'\n    }, theme.breakpoints.up('sm'), {\n      display: 'block'\n    }),\n    contents: {\n      marginTop: theme.spacing(2),\n      paddingLeft: theme.spacing(1)\n    },\n    ul: {\n      padding: 0,\n      margin: 0,\n      listStyle: 'none'\n    },\n    item: {\n      fontSize: '.8125rem',\n      padding: theme.spacing(0.5, 0, 0.5, \"\".concat(Math.max(0, theme.spacing(1) - 3), \"px\")),\n      borderLeft: \"3px solid transparent\",\n      boxSizing: 'border-box',\n      '&:hover': {\n        borderLeftColor: theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[900]\n      },\n      '&$active,&:active': {\n        borderLeftColor: theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[800]\n      }\n    },\n    secondaryItem: {\n      paddingLeft: theme.spacing(2.5)\n    },\n    active: {}\n  };\n}); // TODO: these nodes are mutable sources. Use createMutableSource once it's stable\n\nfunction getItemsClient(headings) {\n  var itemsWithNode = [];\n  headings.forEach(function (item) {\n    itemsWithNode.push(_objectSpread(_objectSpread({}, item), {}, {\n      node: document.getElementById(item.hash)\n    }));\n\n    if (item.children.length > 0) {\n      item.children.forEach(function (subitem) {\n        itemsWithNode.push(_objectSpread(_objectSpread({}, subitem), {}, {\n          node: document.getElementById(subitem.hash)\n        }));\n      });\n    }\n  });\n  return itemsWithNode;\n}\n\nvar noop = function noop() {};\n\nfunction useThrottledOnScroll(callback, delay) {\n  var throttledCallback = React.useMemo(function () {\n    return callback ? throttle(callback, delay) : noop;\n  }, [callback, delay]);\n  React.useEffect(function () {\n    if (throttledCallback === noop) {\n      return undefined;\n    }\n\n    window.addEventListener('scroll', throttledCallback);\n    return function () {\n      window.removeEventListener('scroll', throttledCallback);\n      throttledCallback.cancel();\n    };\n  }, [throttledCallback]);\n}\n\nexport default function AppTableOfContents(props) {\n  var _this = this;\n\n  var items = props.items;\n  var classes = useStyles();\n  var t = useSelector(function (state) {\n    return state.options.t;\n  });\n  var itemsWithNodeRef = React.useRef([]);\n  React.useEffect(function () {\n    itemsWithNodeRef.current = getItemsClient(items);\n  }, [items]);\n\n  var _React$useContext = React.useContext(PageContext),\n      activePage = _React$useContext.activePage;\n\n  var _React$useState = React.useState(null),\n      activeState = _React$useState[0],\n      setActiveState = _React$useState[1];\n\n  var clickedRef = React.useRef(false);\n  var unsetClickedRef = React.useRef(null);\n  var findActiveIndex = React.useCallback(function () {\n    // Don't set the active index based on scroll if a link was just clicked\n    if (clickedRef.current) {\n      return;\n    }\n\n    var active;\n\n    for (var i = itemsWithNodeRef.current.length - 1; i >= 0; i -= 1) {\n      // No hash if we're near the top of the page\n      if (document.documentElement.scrollTop < 200) {\n        active = {\n          hash: null\n        };\n        break;\n      }\n\n      var item = itemsWithNodeRef.current[i];\n\n      if (true) {\n        if (!item.node) {\n          console.error(\"Missing node on the item \".concat(_JSON$stringify(item, null, 2)));\n        }\n      }\n\n      if (item.node && item.node.offsetTop < document.documentElement.scrollTop + document.documentElement.clientHeight / 8) {\n        active = item;\n        break;\n      }\n    }\n\n    if (active && activeState !== active.hash) {\n      setActiveState(active.hash);\n    }\n  }, [activeState]); // Corresponds to 10 frames at 60 Hz\n\n  useThrottledOnScroll(items.length > 0 ? findActiveIndex : null, 166);\n\n  var handleClick = function handleClick(hash) {\n    return function (event) {\n      // Ignore click for new tab/new window behavior\n      if (event.defaultPrevented || event.button !== 0 || // ignore everything but left-click\n      event.metaKey || event.ctrlKey || event.altKey || event.shiftKey) {\n        return;\n      } // Used to disable findActiveIndex if the page scrolls due to a click\n\n\n      clickedRef.current = true;\n      unsetClickedRef.current = setTimeout(function () {\n        clickedRef.current = false;\n      }, 1000);\n\n      if (activeState !== hash) {\n        setActiveState(hash);\n      }\n    };\n  };\n\n  React.useEffect(function () {\n    return function () {\n      clearTimeout(unsetClickedRef.current);\n    };\n  }, []);\n\n  var itemLink = function itemLink(item, secondary) {\n    return __jsx(Link, {\n      display: \"block\",\n      color: activeState === item.hash ? 'textPrimary' : 'textSecondary',\n      href: \"\".concat(activePage.pathname, \"#\").concat(item.hash),\n      underline: \"none\",\n      onClick: handleClick(item.hash),\n      className: clsx(classes.item, secondary && classes.secondaryItem, activeState === item.hash && classes.active),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 5\n      }\n    }, __jsx(\"span\", {\n      dangerouslySetInnerHTML: {\n        __html: item.text\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  return __jsx(\"nav\", {\n    className: classes.root,\n    \"aria-label\": t('pageTOC'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 5\n    }\n  }, __jsx(NoSsr, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }, __jsx(Ad, {\n    placement: \"tocs-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  })), items.length > 0 ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    gutterBottom: true,\n    className: classes.contents,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, t('tableOfContents')), __jsx(Typography, {\n    component: \"ul\",\n    className: classes.ul,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 11\n    }\n  }, items.map(function (item) {\n    return __jsx(\"li\", {\n      key: item.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, itemLink(item), item.children.length > 0 ? __jsx(\"ul\", {\n      className: classes.ul,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 19\n      }\n    }, item.children.map(function (subitem) {\n      return __jsx(\"li\", {\n        key: subitem.text,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 23\n        }\n      }, itemLink(subitem, true));\n    })) : null);\n  }))) : null, __jsx(NoSsr, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }\n  }, __jsx(Ad, {\n    placement: \"tocs-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  })));\n}\nAppTableOfContents.propTypes = {\n  items: PropTypes.array.isRequired\n};","map":{"version":3,"sources":["/home/marcelo.faria/Documentos/b2w/msf-ui/docs/src/modules/components/AppTableOfContents.js"],"names":["React","PropTypes","throttle","clsx","useSelector","makeStyles","Typography","NoSsr","Link","PageContext","Ad","useStyles","theme","root","top","marginTop","width","flexShrink","position","height","overflowY","padding","spacing","display","breakpoints","up","contents","paddingLeft","ul","margin","listStyle","item","fontSize","Math","max","borderLeft","boxSizing","borderLeftColor","palette","type","grey","secondaryItem","active","getItemsClient","headings","itemsWithNode","forEach","push","node","document","getElementById","hash","children","length","subitem","noop","useThrottledOnScroll","callback","delay","throttledCallback","useMemo","useEffect","undefined","window","addEventListener","removeEventListener","cancel","AppTableOfContents","props","items","classes","t","state","options","itemsWithNodeRef","useRef","current","useContext","activePage","useState","activeState","setActiveState","clickedRef","unsetClickedRef","findActiveIndex","useCallback","i","documentElement","scrollTop","console","error","offsetTop","clientHeight","handleClick","event","defaultPrevented","button","metaKey","ctrlKey","altKey","shiftKey","setTimeout","clearTimeout","itemLink","secondary","pathname","__html","text","map","propTypes","array","isRequired"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-danger */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash/throttle';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport Link from 'docs/src/modules/components/Link';\nimport PageContext from 'docs/src/modules/components/PageContext';\nimport Ad from 'docs/src/modules/components/Ad';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    top: 70,\n    // Fix IE 11 position sticky issue.\n    marginTop: 70,\n    width: 175,\n    flexShrink: 0,\n    position: 'sticky',\n    height: 'calc(100vh - 70px)',\n    overflowY: 'auto',\n    padding: theme.spacing(2, 2, 2, 0),\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block',\n    },\n  },\n  contents: {\n    marginTop: theme.spacing(2),\n    paddingLeft: theme.spacing(1),\n  },\n  ul: {\n    padding: 0,\n    margin: 0,\n    listStyle: 'none',\n  },\n  item: {\n    fontSize: '.8125rem',\n    padding: theme.spacing(0.5, 0, 0.5, `${Math.max(0, theme.spacing(1) - 3)}px`),\n    borderLeft: `3px solid transparent`,\n    boxSizing: 'border-box',\n    '&:hover': {\n      borderLeftColor:\n        theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[900],\n    },\n    '&$active,&:active': {\n      borderLeftColor:\n        theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[800],\n    },\n  },\n  secondaryItem: {\n    paddingLeft: theme.spacing(2.5),\n  },\n  active: {},\n}));\n\n// TODO: these nodes are mutable sources. Use createMutableSource once it's stable\nfunction getItemsClient(headings) {\n  const itemsWithNode = [];\n\n  headings.forEach((item) => {\n    itemsWithNode.push({\n      ...item,\n      node: document.getElementById(item.hash),\n    });\n\n    if (item.children.length > 0) {\n      item.children.forEach((subitem) => {\n        itemsWithNode.push({\n          ...subitem,\n          node: document.getElementById(subitem.hash),\n        });\n      });\n    }\n  });\n  return itemsWithNode;\n}\n\nconst noop = () => {};\n\nfunction useThrottledOnScroll(callback, delay) {\n  const throttledCallback = React.useMemo(() => (callback ? throttle(callback, delay) : noop), [\n    callback,\n    delay,\n  ]);\n\n  React.useEffect(() => {\n    if (throttledCallback === noop) {\n      return undefined;\n    }\n\n    window.addEventListener('scroll', throttledCallback);\n    return () => {\n      window.removeEventListener('scroll', throttledCallback);\n      throttledCallback.cancel();\n    };\n  }, [throttledCallback]);\n}\n\nexport default function AppTableOfContents(props) {\n  const { items } = props;\n  const classes = useStyles();\n  const t = useSelector((state) => state.options.t);\n\n  const itemsWithNodeRef = React.useRef([]);\n  React.useEffect(() => {\n    itemsWithNodeRef.current = getItemsClient(items);\n  }, [items]);\n\n  const { activePage } = React.useContext(PageContext);\n  const [activeState, setActiveState] = React.useState(null);\n  const clickedRef = React.useRef(false);\n  const unsetClickedRef = React.useRef(null);\n  const findActiveIndex = React.useCallback(() => {\n    // Don't set the active index based on scroll if a link was just clicked\n    if (clickedRef.current) {\n      return;\n    }\n\n    let active;\n    for (let i = itemsWithNodeRef.current.length - 1; i >= 0; i -= 1) {\n      // No hash if we're near the top of the page\n      if (document.documentElement.scrollTop < 200) {\n        active = { hash: null };\n        break;\n      }\n\n      const item = itemsWithNodeRef.current[i];\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!item.node) {\n          console.error(`Missing node on the item ${JSON.stringify(item, null, 2)}`);\n        }\n      }\n\n      if (\n        item.node &&\n        item.node.offsetTop <\n          document.documentElement.scrollTop + document.documentElement.clientHeight / 8\n      ) {\n        active = item;\n        break;\n      }\n    }\n\n    if (active && activeState !== active.hash) {\n      setActiveState(active.hash);\n    }\n  }, [activeState]);\n\n  // Corresponds to 10 frames at 60 Hz\n  useThrottledOnScroll(items.length > 0 ? findActiveIndex : null, 166);\n\n  const handleClick = (hash) => (event) => {\n    // Ignore click for new tab/new window behavior\n    if (\n      event.defaultPrevented ||\n      event.button !== 0 || // ignore everything but left-click\n      event.metaKey ||\n      event.ctrlKey ||\n      event.altKey ||\n      event.shiftKey\n    ) {\n      return;\n    }\n\n    // Used to disable findActiveIndex if the page scrolls due to a click\n    clickedRef.current = true;\n    unsetClickedRef.current = setTimeout(() => {\n      clickedRef.current = false;\n    }, 1000);\n\n    if (activeState !== hash) {\n      setActiveState(hash);\n    }\n  };\n\n  React.useEffect(\n    () => () => {\n      clearTimeout(unsetClickedRef.current);\n    },\n    [],\n  );\n\n  const itemLink = (item, secondary) => (\n    <Link\n      display=\"block\"\n      color={activeState === item.hash ? 'textPrimary' : 'textSecondary'}\n      href={`${activePage.pathname}#${item.hash}`}\n      underline=\"none\"\n      onClick={handleClick(item.hash)}\n      className={clsx(\n        classes.item,\n        { [classes.secondaryItem]: secondary },\n        activeState === item.hash ? classes.active : undefined,\n      )}\n    >\n      <span dangerouslySetInnerHTML={{ __html: item.text }} />\n    </Link>\n  );\n\n  return (\n    <nav className={classes.root} aria-label={t('pageTOC')}>\n      <NoSsr>\n        <Ad placement=\"tocs-top\" />\n      </NoSsr>\n      {items.length > 0 ? (\n        <React.Fragment>\n          <Typography gutterBottom className={classes.contents}>\n            {t('tableOfContents')}\n          </Typography>\n          <Typography component=\"ul\" className={classes.ul}>\n            {items.map((item) => (\n              <li key={item.text}>\n                {itemLink(item)}\n                {item.children.length > 0 ? (\n                  <ul className={classes.ul}>\n                    {item.children.map((subitem) => (\n                      <li key={subitem.text}>{itemLink(subitem, true)}</li>\n                    ))}\n                  </ul>\n                ) : null}\n              </li>\n            ))}\n          </Typography>\n        </React.Fragment>\n      ) : null}\n      <NoSsr>\n        <Ad placement=\"tocs-bottom\" />\n      </NoSsr>\n    </nav>\n  );\n}\n\nAppTableOfContents.propTypes = {\n  items: PropTypes.array.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}