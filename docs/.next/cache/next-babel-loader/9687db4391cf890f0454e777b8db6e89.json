{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _Map from \"@babel/runtime-corejs2/core-js/map\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nvar _jsxFileName = \"/home/marcelo.faria/Documentos/b2w/msf-ui/docs/src/modules/components/DemoSandboxed.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { create } from 'jss';\nimport { makeStyles, useTheme, jssPreset, StylesProvider } from \"../../../../packages/material-ui/src/styles\";\nimport rtl from 'jss-rtl';\nimport { useSelector } from 'react-redux';\nimport DemoErrorBoundary from \"./DemoErrorBoundary\";\n\nfunction FramedDemo(props) {\n  var children = props.children,\n      document = props.document;\n  var theme = useTheme();\n  React.useEffect(function () {\n    document.body.dir = theme.direction;\n  }, [document, theme.direction]);\n\n  var _React$useMemo = React.useMemo(function () {\n    return {\n      jss: create({\n        plugins: [].concat(_toConsumableArray(jssPreset().plugins), [rtl()]),\n        insertionPoint: document.head\n      }),\n      sheetsManager: new _Map()\n    };\n  }, [document]),\n      jss = _React$useMemo.jss,\n      sheetsManager = _React$useMemo.sheetsManager;\n\n  var getWindow = React.useCallback(function () {\n    return document.defaultView;\n  }, [document]);\n  return __jsx(StylesProvider, {\n    jss: jss,\n    sheetsManager: sheetsManager,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.cloneElement(children, {\n    window: getWindow\n  }));\n}\n\nFramedDemo.propTypes = {\n  children: PropTypes.node,\n  document: PropTypes.object.isRequired\n};\nvar useStyles = makeStyles(function (theme) {\n  return {\n    frame: {\n      backgroundColor: theme.palette.background[\"default\"],\n      flexGrow: 1,\n      height: 400,\n      border: 'none',\n      boxShadow: theme.shadows[1]\n    }\n  };\n}, {\n  name: 'DemoFrame'\n});\n\nfunction DemoFrame(props) {\n  var _frameRef$current;\n\n  var children = props.children,\n      title = props.title,\n      other = _objectWithoutProperties(props, [\"children\", \"title\"]);\n\n  var classes = useStyles();\n  /**\n   * @type {import('react').Ref<HTMLIFrameElement>}\n   */\n\n  var frameRef = React.useRef(null); // If we portal content into the iframe before the load event then that content\n  // is dropped in firefox.\n\n  var _React$useReducer = React.useReducer(function () {\n    return true;\n  }, false),\n      iframeLoaded = _React$useReducer[0],\n      onLoad = _React$useReducer[1];\n\n  React.useEffect(function () {\n    var document = frameRef.current.contentDocument; // When we hydrate the iframe then the load event is already dispatched\n    // once the iframe markup is parsed (maybe later but the important part is\n    // that it happens before React can attach event listeners).\n    // We need to check the readyState of the document once the iframe is mounted\n    // and \"replay\" the missed load event.\n    // See https://github.com/facebook/react/pull/13862 for ongoing effort in React\n    // (though not with iframes in mind).\n\n    if (document != null && document.readyState === 'complete' && !iframeLoaded) {\n      onLoad();\n    }\n  }, [iframeLoaded]);\n  var document = (_frameRef$current = frameRef.current) === null || _frameRef$current === void 0 ? void 0 : _frameRef$current.contentDocument;\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, __jsx(\"iframe\", _extends({\n    className: classes.frame,\n    onLoad: onLoad,\n    ref: frameRef,\n    title: title\n  }, other, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  })), iframeLoaded !== false ? /*#__PURE__*/ReactDOM.createPortal(__jsx(FramedDemo, {\n    document: document,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, children), document.body) : null);\n}\n\nDemoFrame.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string.isRequired\n};\n/**\n * Isolates the demo component as best as possible. Additional props are spread\n * to an `iframe` if `iframe={true}`.\n */\n\nfunction DemoSandboxed(props) {\n  var Component = props.component,\n      iframe = props.iframe,\n      name = props.name,\n      onResetDemoClick = props.onResetDemoClick,\n      other = _objectWithoutProperties(props, [\"component\", \"iframe\", \"name\", \"onResetDemoClick\"]);\n\n  var Sandbox = iframe ? DemoFrame : React.Fragment;\n  var sandboxProps = iframe ? _objectSpread({\n    title: \"\".concat(name, \" demo\")\n  }, other) : {};\n  var t = useSelector(function (state) {\n    return state.options.t;\n  });\n  return __jsx(DemoErrorBoundary, {\n    onResetDemoClick: onResetDemoClick,\n    t: t,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, __jsx(Sandbox, _extends({}, sandboxProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }), __jsx(Component, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  })));\n}\n\nDemoSandboxed.propTypes = {\n  component: PropTypes.elementType.isRequired,\n  iframe: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onResetDemoClick: PropTypes.func.isRequired\n};\nexport default /*#__PURE__*/React.memo(DemoSandboxed);","map":{"version":3,"sources":["/home/marcelo.faria/Documentos/b2w/msf-ui/docs/src/modules/components/DemoSandboxed.js"],"names":["React","ReactDOM","PropTypes","create","makeStyles","useTheme","jssPreset","StylesProvider","rtl","useSelector","DemoErrorBoundary","FramedDemo","props","children","document","theme","useEffect","body","dir","direction","useMemo","jss","plugins","insertionPoint","head","sheetsManager","getWindow","useCallback","defaultView","cloneElement","window","propTypes","node","object","isRequired","useStyles","frame","backgroundColor","palette","background","flexGrow","height","border","boxShadow","shadows","name","DemoFrame","title","other","classes","frameRef","useRef","useReducer","iframeLoaded","onLoad","current","contentDocument","readyState","createPortal","string","DemoSandboxed","Component","component","iframe","onResetDemoClick","Sandbox","Fragment","sandboxProps","t","state","options","elementType","bool","func","memo"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { create } from 'jss';\nimport { makeStyles, useTheme, jssPreset, StylesProvider } from '@material-ui/core/styles';\nimport rtl from 'jss-rtl';\nimport { useSelector } from 'react-redux';\nimport DemoErrorBoundary from 'docs/src/modules/components/DemoErrorBoundary';\n\nfunction FramedDemo(props) {\n  const { children, document } = props;\n\n  const theme = useTheme();\n  React.useEffect(() => {\n    document.body.dir = theme.direction;\n  }, [document, theme.direction]);\n\n  const { jss, sheetsManager } = React.useMemo(() => {\n    return {\n      jss: create({\n        plugins: [...jssPreset().plugins, rtl()],\n        insertionPoint: document.head,\n      }),\n      sheetsManager: new Map(),\n    };\n  }, [document]);\n\n  const getWindow = React.useCallback(() => document.defaultView, [document]);\n\n  return (\n    <StylesProvider jss={jss} sheetsManager={sheetsManager}>\n      {React.cloneElement(children, {\n        window: getWindow,\n      })}\n    </StylesProvider>\n  );\n}\nFramedDemo.propTypes = {\n  children: PropTypes.node,\n  document: PropTypes.object.isRequired,\n};\n\nconst useStyles = makeStyles(\n  (theme) => ({\n    frame: {\n      backgroundColor: theme.palette.background.default,\n      flexGrow: 1,\n      height: 400,\n      border: 'none',\n      boxShadow: theme.shadows[1],\n    },\n  }),\n  { name: 'DemoFrame' },\n);\n\nfunction DemoFrame(props) {\n  const { children, title, ...other } = props;\n  const classes = useStyles();\n  /**\n   * @type {import('react').Ref<HTMLIFrameElement>}\n   */\n  const frameRef = React.useRef(null);\n\n  // If we portal content into the iframe before the load event then that content\n  // is dropped in firefox.\n  const [iframeLoaded, onLoad] = React.useReducer(() => true, false);\n\n  React.useEffect(() => {\n    const document = frameRef.current.contentDocument;\n    // When we hydrate the iframe then the load event is already dispatched\n    // once the iframe markup is parsed (maybe later but the important part is\n    // that it happens before React can attach event listeners).\n    // We need to check the readyState of the document once the iframe is mounted\n    // and \"replay\" the missed load event.\n    // See https://github.com/facebook/react/pull/13862 for ongoing effort in React\n    // (though not with iframes in mind).\n    if (document != null && document.readyState === 'complete' && !iframeLoaded) {\n      onLoad();\n    }\n  }, [iframeLoaded]);\n\n  const document = frameRef.current?.contentDocument;\n  return (\n    <React.Fragment>\n      <iframe className={classes.frame} onLoad={onLoad} ref={frameRef} title={title} {...other} />\n      {iframeLoaded !== false\n        ? ReactDOM.createPortal(\n            <FramedDemo document={document}>{children}</FramedDemo>,\n            document.body,\n          )\n        : null}\n    </React.Fragment>\n  );\n}\n\nDemoFrame.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string.isRequired,\n};\n\n/**\n * Isolates the demo component as best as possible. Additional props are spread\n * to an `iframe` if `iframe={true}`.\n */\nfunction DemoSandboxed(props) {\n  const { component: Component, iframe, name, onResetDemoClick, ...other } = props;\n  const Sandbox = iframe ? DemoFrame : React.Fragment;\n  const sandboxProps = iframe ? { title: `${name} demo`, ...other } : {};\n\n  const t = useSelector((state) => state.options.t);\n\n  return (\n    <DemoErrorBoundary onResetDemoClick={onResetDemoClick} t={t}>\n      <Sandbox {...sandboxProps}>\n        <Component />\n      </Sandbox>\n    </DemoErrorBoundary>\n  );\n}\n\nDemoSandboxed.propTypes = {\n  component: PropTypes.elementType.isRequired,\n  iframe: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onResetDemoClick: PropTypes.func.isRequired,\n};\n\nexport default React.memo(DemoSandboxed);\n"]},"metadata":{},"sourceType":"module"}