{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/marcelo.faria/Documentos/b2w/msf-ui/docs/src/modules/components/AppTableOfContents.js\";\nvar __jsx = React.createElement;\n/* eslint-disable react/no-danger */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash/throttle';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { makeStyles } from \"../../../../packages/material-ui/src/styles\";\nimport Typography from \"../../../../packages/material-ui/src/Typography\";\nimport NoSsr from \"../../../../packages/material-ui/src/NoSsr\";\nimport Link from \"./Link\";\nimport PageContext from \"./PageContext\";\nimport Ad from \"./Ad\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: _defineProperty({\n      top: 70,\n      // Fix IE 11 position sticky issue.\n      marginTop: 70,\n      width: 175,\n      flexShrink: 0,\n      position: 'sticky',\n      height: 'calc(100vh - 70px)',\n      overflowY: 'auto',\n      padding: theme.spacing(2, 2, 2, 0),\n      display: 'none'\n    }, theme.breakpoints.up('sm'), {\n      display: 'block'\n    }),\n    contents: {\n      marginTop: theme.spacing(2),\n      paddingLeft: theme.spacing(1)\n    },\n    ul: {\n      padding: 0,\n      margin: 0,\n      listStyle: 'none'\n    },\n    item: {\n      fontSize: '.8125rem',\n      padding: theme.spacing(0.5, 0, 0.5, \"\".concat(Math.max(0, theme.spacing(1) - 3), \"px\")),\n      borderLeft: \"3px solid transparent\",\n      boxSizing: 'border-box',\n      '&:hover': {\n        borderLeftColor: theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[900]\n      },\n      '&$active,&:active': {\n        borderLeftColor: theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[800]\n      }\n    },\n    secondaryItem: {\n      paddingLeft: theme.spacing(2.5)\n    },\n    active: {}\n  };\n}); // TODO: these nodes are mutable sources. Use createMutableSource once it's stable\n\nfunction getItemsClient(headings) {\n  var itemsWithNode = [];\n  headings.forEach(function (item) {\n    itemsWithNode.push(_objectSpread(_objectSpread({}, item), {}, {\n      node: document.getElementById(item.hash)\n    }));\n\n    if (item.children.length > 0) {\n      item.children.forEach(function (subitem) {\n        itemsWithNode.push(_objectSpread(_objectSpread({}, subitem), {}, {\n          node: document.getElementById(subitem.hash)\n        }));\n      });\n    }\n  });\n  return itemsWithNode;\n}\n\nvar noop = function noop() {};\n\nfunction useThrottledOnScroll(callback, delay) {\n  var throttledCallback = React.useMemo(function () {\n    return callback ? throttle(callback, delay) : noop;\n  }, [callback, delay]);\n  React.useEffect(function () {\n    if (throttledCallback === noop) {\n      return undefined;\n    }\n\n    window.addEventListener('scroll', throttledCallback);\n    return function () {\n      window.removeEventListener('scroll', throttledCallback);\n      throttledCallback.cancel();\n    };\n  }, [throttledCallback]);\n}\n\nexport default function AppTableOfContents(props) {\n  var _this = this;\n\n  var items = props.items;\n  var classes = useStyles();\n  var t = useSelector(function (state) {\n    return state.options.t;\n  });\n  var itemsWithNodeRef = React.useRef([]);\n  React.useEffect(function () {\n    itemsWithNodeRef.current = getItemsClient(items);\n  }, [items]);\n\n  var _React$useContext = React.useContext(PageContext),\n      activePage = _React$useContext.activePage;\n\n  var _React$useState = React.useState(null),\n      activeState = _React$useState[0],\n      setActiveState = _React$useState[1];\n\n  var clickedRef = React.useRef(false);\n  var unsetClickedRef = React.useRef(null);\n  var findActiveIndex = React.useCallback(function () {\n    // Don't set the active index based on scroll if a link was just clicked\n    if (clickedRef.current) {\n      return;\n    }\n\n    var active;\n\n    for (var i = itemsWithNodeRef.current.length - 1; i >= 0; i -= 1) {\n      // No hash if we're near the top of the page\n      if (document.documentElement.scrollTop < 200) {\n        active = {\n          hash: null\n        };\n        break;\n      }\n\n      var item = itemsWithNodeRef.current[i];\n\n      if (true) {\n        if (!item.node) {\n          console.error(\"Missing node on the item \".concat(_JSON$stringify(item, null, 2)));\n        }\n      }\n\n      if (item.node && item.node.offsetTop < document.documentElement.scrollTop + document.documentElement.clientHeight / 8) {\n        active = item;\n        break;\n      }\n    }\n\n    if (active && activeState !== active.hash) {\n      setActiveState(active.hash);\n    }\n  }, [activeState]); // Corresponds to 10 frames at 60 Hz\n\n  useThrottledOnScroll(items.length > 0 ? findActiveIndex : null, 166);\n\n  var handleClick = function handleClick(hash) {\n    return function (event) {\n      // Ignore click for new tab/new window behavior\n      if (event.defaultPrevented || event.button !== 0 || // ignore everything but left-click\n      event.metaKey || event.ctrlKey || event.altKey || event.shiftKey) {\n        return;\n      } // Used to disable findActiveIndex if the page scrolls due to a click\n\n\n      clickedRef.current = true;\n      unsetClickedRef.current = setTimeout(function () {\n        clickedRef.current = false;\n      }, 1000);\n\n      if (activeState !== hash) {\n        setActiveState(hash);\n      }\n    };\n  };\n\n  React.useEffect(function () {\n    return function () {\n      clearTimeout(unsetClickedRef.current);\n    };\n  }, []);\n\n  var itemLink = function itemLink(item, secondary) {\n    return __jsx(Link, {\n      display: \"block\",\n      color: activeState === item.hash ? 'textPrimary' : 'textSecondary',\n      href: \"\".concat(activePage.pathname, \"#\").concat(item.hash),\n      underline: \"none\",\n      onClick: handleClick(item.hash),\n      className: clsx(classes.item, secondary && classes.secondaryItem, activeState === item.hash && classes.active),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 5\n      }\n    }, __jsx(\"span\", {\n      dangerouslySetInnerHTML: {\n        __html: item.text\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  return __jsx(\"nav\", {\n    className: classes.root,\n    \"aria-label\": t('pageTOC'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 5\n    }\n  }, __jsx(NoSsr, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }\n  }, __jsx(Ad, {\n    placement: \"tocs-top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  })), items.length > 0 ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    gutterBottom: true,\n    className: classes.contents,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, t('tableOfContents')), __jsx(Typography, {\n    component: \"ul\",\n    className: classes.ul,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 11\n    }\n  }, items.map(function (item) {\n    return __jsx(\"li\", {\n      key: item.text,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, itemLink(item), item.children.length > 0 ? __jsx(\"ul\", {\n      className: classes.ul,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 19\n      }\n    }, item.children.map(function (subitem) {\n      return __jsx(\"li\", {\n        key: subitem.text,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 23\n        }\n      }, itemLink(subitem, true));\n    })) : null);\n  }))) : null, __jsx(NoSsr, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }\n  }, __jsx(Ad, {\n    placement: \"tocs-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  })));\n}\nAppTableOfContents.propTypes = {\n  items: PropTypes.array.isRequired\n};","map":{"version":3,"sources":["/home/marcelo.faria/Documentos/b2w/msf-ui/docs/src/modules/components/AppTableOfContents.js"],"names":["useStyles","makeStyles","root","top","marginTop","width","flexShrink","position","height","overflowY","padding","theme","display","contents","paddingLeft","ul","margin","listStyle","item","fontSize","Math","borderLeft","boxSizing","borderLeftColor","secondaryItem","active","itemsWithNode","headings","node","document","subitem","noop","throttledCallback","callback","throttle","React","window","items","props","classes","t","useSelector","state","itemsWithNodeRef","getItemsClient","activePage","activeState","setActiveState","clickedRef","unsetClickedRef","findActiveIndex","i","hash","console","useThrottledOnScroll","handleClick","event","setTimeout","clearTimeout","itemLink","clsx","__html","text","AppTableOfContents","PropTypes","isRequired"],"mappings":";;;;;AAAA;;AACA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,SAAA,MAAA,YAAA;AACA,OAAA,QAAA,MAAA,iBAAA;AACA,OAAA,IAAA,MAAA,MAAA;AACA,SAAA,WAAA,QAAA,aAAA;AACA,SAAA,UAAA;AACA,OAAA,UAAA;AACA,OAAA,KAAA;AACA,OAAA,IAAA;AACA,OAAA,WAAA;AACA,OAAA,EAAA;AAEA,IAAMA,SAAS,GAAGC,UAAU,CAAC,UAAA,KAAA,EAAA;AAAA,SAAY;AACvCC,IAAAA,IAAI,EAAA,eAAA,CAAA;AACFC,MAAAA,GAAG,EADD,EAAA;AAEF;AACAC,MAAAA,SAAS,EAHP,EAAA;AAIFC,MAAAA,KAAK,EAJH,GAAA;AAKFC,MAAAA,UAAU,EALR,CAAA;AAMFC,MAAAA,QAAQ,EANN,QAAA;AAOFC,MAAAA,MAAM,EAPJ,oBAAA;AAQFC,MAAAA,SAAS,EARP,MAAA;AASFC,MAAAA,OAAO,EAAEC,KAAK,CAALA,OAAAA,CAAAA,CAAAA,EAAAA,CAAAA,EAAAA,CAAAA,EATP,CASOA,CATP;AAUFC,MAAAA,OAAO,EAAE;AAVP,KAAA,EAWDD,KAAK,CAALA,WAAAA,CAAAA,EAAAA,CAXC,IAWDA,CAXC,EAW4B;AAC5BC,MAAAA,OAAO,EAAE;AADmB,KAX5B,CADmC;AAgBvCC,IAAAA,QAAQ,EAAE;AACRT,MAAAA,SAAS,EAAEO,KAAK,CAALA,OAAAA,CADH,CACGA,CADH;AAERG,MAAAA,WAAW,EAAEH,KAAK,CAALA,OAAAA,CAAAA,CAAAA;AAFL,KAhB6B;AAoBvCI,IAAAA,EAAE,EAAE;AACFL,MAAAA,OAAO,EADL,CAAA;AAEFM,MAAAA,MAAM,EAFJ,CAAA;AAGFC,MAAAA,SAAS,EAAE;AAHT,KApBmC;AAyBvCC,IAAAA,IAAI,EAAE;AACJC,MAAAA,QAAQ,EADJ,UAAA;AAEJT,MAAAA,OAAO,EAAEC,KAAK,CAALA,OAAAA,CAAAA,GAAAA,EAAAA,CAAAA,EAAAA,GAAAA,EAAAA,GAAAA,MAAAA,CAA8BS,IAAI,CAAJA,GAAAA,CAAAA,CAAAA,EAAYT,KAAK,CAALA,OAAAA,CAAAA,CAAAA,IAA1CA,CAA8BS,CAA9BT,EAFL,IAEKA,CAAAA,CAFL;AAGJU,MAAAA,UAAU,EAHN,uBAAA;AAIJC,MAAAA,SAAS,EAJL,YAAA;AAKJ,iBAAW;AACTC,QAAAA,eAAe,EACbZ,KAAK,CAALA,OAAAA,CAAAA,IAAAA,KAAAA,OAAAA,GAAiCA,KAAK,CAALA,OAAAA,CAAAA,IAAAA,CAAjCA,GAAiCA,CAAjCA,GAA2DA,KAAK,CAALA,OAAAA,CAAAA,IAAAA,CAAAA,GAAAA;AAFpD,OALP;AASJ,2BAAqB;AACnBY,QAAAA,eAAe,EACbZ,KAAK,CAALA,OAAAA,CAAAA,IAAAA,KAAAA,OAAAA,GAAiCA,KAAK,CAALA,OAAAA,CAAAA,IAAAA,CAAjCA,GAAiCA,CAAjCA,GAA2DA,KAAK,CAALA,OAAAA,CAAAA,IAAAA,CAAAA,GAAAA;AAF1C;AATjB,KAzBiC;AAuCvCa,IAAAA,aAAa,EAAE;AACbV,MAAAA,WAAW,EAAEH,KAAK,CAALA,OAAAA,CAAAA,GAAAA;AADA,KAvCwB;AA0CvCc,IAAAA,MAAM,EAAE;AA1C+B,GAAZ;AAA7B,CAA4B,CAA5B,C,CA6CA;;AACA,SAAA,cAAA,CAAA,QAAA,EAAkC;AAChC,MAAMC,aAAa,GAAnB,EAAA;AAEAC,EAAAA,QAAQ,CAARA,OAAAA,CAAiB,UAAA,IAAA,EAAU;AACzBD,IAAAA,aAAa,CAAbA,IAAAA,CAAAA,aAAAA,CAAAA,aAAAA,CAAAA,EAAAA,EAAAA,IAAAA,CAAAA,EAAAA,EAAAA,EAAAA;AAEEE,MAAAA,IAAI,EAAEC,QAAQ,CAARA,cAAAA,CAAwBX,IAAI,CAA5BW,IAAAA;AAFRH,KAAAA,CAAAA;;AAKA,QAAIR,IAAI,CAAJA,QAAAA,CAAAA,MAAAA,GAAJ,CAAA,EAA8B;AAC5BA,MAAAA,IAAI,CAAJA,QAAAA,CAAAA,OAAAA,CAAsB,UAAA,OAAA,EAAa;AACjCQ,QAAAA,aAAa,CAAbA,IAAAA,CAAAA,aAAAA,CAAAA,aAAAA,CAAAA,EAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAAA,EAAAA;AAEEE,UAAAA,IAAI,EAAEC,QAAQ,CAARA,cAAAA,CAAwBC,OAAO,CAA/BD,IAAAA;AAFRH,SAAAA,CAAAA;AADFR,OAAAA;AAMD;AAbHS,GAAAA;AAeA,SAAA,aAAA;AACD;;AAED,IAAMI,IAAI,GAAG,SAAPA,IAAO,GAAM,CAAnB,CAAA;;AAEA,SAAA,oBAAA,CAAA,QAAA,EAAA,KAAA,EAA+C;AAC7C,MAAMC,iBAAiB,GAAG,KAAK,CAAL,OAAA,CAAc,YAAA;AAAA,WAAOC,QAAQ,GAAGC,QAAQ,CAAA,QAAA,EAAX,KAAW,CAAX,GAAf,IAAA;AAAd,GAAA,EAAmE,CAAA,QAAA,EAA7F,KAA6F,CAAnE,CAA1B;AAKAC,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpB,QAAIH,iBAAiB,KAArB,IAAA,EAAgC;AAC9B,aAAA,SAAA;AACD;;AAEDI,IAAAA,MAAM,CAANA,gBAAAA,CAAAA,QAAAA,EAAAA,iBAAAA;AACA,WAAO,YAAM;AACXA,MAAAA,MAAM,CAANA,mBAAAA,CAAAA,QAAAA,EAAAA,iBAAAA;AACAJ,MAAAA,iBAAiB,CAAjBA,MAAAA;AAFF,KAAA;AANFG,GAAAA,EAUG,CAVHA,iBAUG,CAVHA;AAWD;;AAED,eAAe,SAAA,kBAAA,CAAA,KAAA,EAAmC;AAAA,MAAA,KAAA,GAAA,IAAA;;AAAA,MACxCE,KADwC,GAC9BC,KAD8B,CAAA,KAAA;AAEhD,MAAMC,OAAO,GAAGvC,SAAhB,EAAA;AACA,MAAMwC,CAAC,GAAGC,WAAW,CAAC,UAAA,KAAA,EAAA;AAAA,WAAWC,KAAK,CAALA,OAAAA,CAAX,CAAA;AAAtB,GAAqB,CAArB;AAEA,MAAMC,gBAAgB,GAAGR,KAAK,CAALA,MAAAA,CAAzB,EAAyBA,CAAzB;AACAA,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AACpBQ,IAAAA,gBAAgB,CAAhBA,OAAAA,GAA2BC,cAAc,CAAzCD,KAAyC,CAAzCA;AADFR,GAAAA,EAEG,CAFHA,KAEG,CAFHA;;AANgD,MAAA,iBAAA,GAUzBA,KAAK,CAALA,UAAAA,CAVyB,WAUzBA,CAVyB;AAAA,MAUxCU,UAVwC,GAAA,iBAAA,CAAA,UAAA;;AAAA,MAAA,eAAA,GAWVV,KAAK,CAALA,QAAAA,CAXU,IAWVA,CAXU;AAAA,MAWzCW,WAXyC,GAAA,eAAA,CAAA,CAAA,CAAA;AAAA,MAW5BC,cAX4B,GAAA,eAAA,CAAA,CAAA,CAAA;;AAYhD,MAAMC,UAAU,GAAGb,KAAK,CAALA,MAAAA,CAAnB,KAAmBA,CAAnB;AACA,MAAMc,eAAe,GAAGd,KAAK,CAALA,MAAAA,CAAxB,IAAwBA,CAAxB;AACA,MAAMe,eAAe,GAAG,KAAK,CAAL,WAAA,CAAkB,YAAM;AAC9C;AACA,QAAIF,UAAU,CAAd,OAAA,EAAwB;AACtB;AACD;;AAED,QAAA,MAAA;;AACA,SAAK,IAAIG,CAAC,GAAGR,gBAAgB,CAAhBA,OAAAA,CAAAA,MAAAA,GAAb,CAAA,EAAkDQ,CAAC,IAAnD,CAAA,EAA0DA,CAAC,IAA3D,CAAA,EAAkE;AAChE;AACA,UAAItB,QAAQ,CAARA,eAAAA,CAAAA,SAAAA,GAAJ,GAAA,EAA8C;AAC5CJ,QAAAA,MAAM,GAAG;AAAE2B,UAAAA,IAAI,EAAE;AAAR,SAAT3B;AACA;AACD;;AAED,UAAMP,IAAI,GAAGyB,gBAAgB,CAAhBA,OAAAA,CAAb,CAAaA,CAAb;;AAEA,UAAA,IAAA,EAA2C;AACzC,YAAI,CAACzB,IAAI,CAAT,IAAA,EAAgB;AACdmC,UAAAA,OAAO,CAAPA,KAAAA,CAAAA,4BAAAA,MAAAA,CAA0C,eAAA,CAAA,IAAA,EAAA,IAAA,EAA1CA,CAA0C,CAA1CA,CAAAA;AACD;AACF;;AAED,UACEnC,IAAI,CAAJA,IAAAA,IACAA,IAAI,CAAJA,IAAAA,CAAAA,SAAAA,GACEW,QAAQ,CAARA,eAAAA,CAAAA,SAAAA,GAAqCA,QAAQ,CAARA,eAAAA,CAAAA,YAAAA,GAHzC,CAAA,EAIE;AACAJ,QAAAA,MAAM,GAANA,IAAAA;AACA;AACD;AACF;;AAED,QAAIA,MAAM,IAAIqB,WAAW,KAAKrB,MAAM,CAApC,IAAA,EAA2C;AACzCsB,MAAAA,cAAc,CAACtB,MAAM,CAArBsB,IAAc,CAAdA;AACD;AAlCqB,GAAA,EAmCrB,CAjD6C,WAiD7C,CAnCqB,CAAxB,CAdgD,CAmDhD;;AACAO,EAAAA,oBAAoB,CAACjB,KAAK,CAALA,MAAAA,GAAAA,CAAAA,GAAAA,eAAAA,GAAD,IAAA,EAApBiB,GAAoB,CAApBA;;AAEA,MAAMC,WAAW,GAAG,SAAdA,WAAc,CAAA,IAAA,EAAA;AAAA,WAAU,UAAA,KAAA,EAAW;AACvC;AACA,UACEC,KAAK,CAALA,gBAAAA,IACAA,KAAK,CAALA,MAAAA,KADAA,CAAAA,IACsB;AACtBA,MAAAA,KAAK,CAFLA,OAAAA,IAGAA,KAAK,CAHLA,OAAAA,IAIAA,KAAK,CAJLA,MAAAA,IAKAA,KAAK,CANP,QAAA,EAOE;AACA;AAVqC,OAAA,CAavC;;;AACAR,MAAAA,UAAU,CAAVA,OAAAA,GAAAA,IAAAA;AACAC,MAAAA,eAAe,CAAfA,OAAAA,GAA0BQ,UAAU,CAAC,YAAM;AACzCT,QAAAA,UAAU,CAAVA,OAAAA,GAAAA,KAAAA;AADkC,OAAA,EAApCC,IAAoC,CAApCA;;AAIA,UAAIH,WAAW,KAAf,IAAA,EAA0B;AACxBC,QAAAA,cAAc,CAAdA,IAAc,CAAdA;AACD;AArBiB,KAAA;AAApB,GAAA;;AAwBAZ,EAAAA,KAAK,CAALA,SAAAA,CACE,YAAA;AAAA,WAAM,YAAM;AACVuB,MAAAA,YAAY,CAACT,eAAe,CAA5BS,OAAY,CAAZA;AADF,KAAA;AADFvB,GAAAA,EAAAA,EAAAA;;AAOA,MAAMwB,QAAQ,GAAG,SAAXA,QAAW,CAAA,IAAA,EAAA,SAAA,EAAA;AAAA,WACf,KAAA,CAAA,IAAA,EAAA;AACE,MAAA,OAAO,EADT,OAAA;AAEE,MAAA,KAAK,EAAEb,WAAW,KAAK5B,IAAI,CAApB4B,IAAAA,GAAAA,aAAAA,GAFT,eAAA;AAGE,MAAA,IAAI,EAAA,GAAA,MAAA,CAAKD,UAAU,CAAf,QAAA,EAAA,GAAA,EAAA,MAAA,CAA4B3B,IAAI,CAHtC,IAGM,CAHN;AAIE,MAAA,SAAS,EAJX,MAAA;AAKE,MAAA,OAAO,EAAEqC,WAAW,CAACrC,IAAI,CAL3B,IAKsB,CALtB;AAME,MAAA,SAAS,EAAE0C,IAAI,CACbrB,OAAO,CADM,IAAA,EAAA,SAAA,IAEVA,OAAO,CAFG,aAAA,EAGbO,WAAW,KAAK5B,IAAI,CAHP,IAAA,IAGeqB,OAAO,CATvC,MAMiB,CANjB;AAAA,MAAA,MAAA,EAAA,KAAA;AAAA,MAAA,QAAA,EAAA;AAAA,QAAA,QAAA,EAAA,YAAA;AAAA,QAAA,UAAA,EAAA,GAAA;AAAA,QAAA,YAAA,EAAA;AAAA;AAAA,KAAA,EAYE,KAAA,CAAA,MAAA,EAAA;AAAM,MAAA,uBAAuB,EAAE;AAAEsB,QAAAA,MAAM,EAAE3C,IAAI,CAAC4C;AAAf,OAA/B;AAAA,MAAA,MAAA,EAAA,KAAA;AAAA,MAAA,QAAA,EAAA;AAAA,QAAA,QAAA,EAAA,YAAA;AAAA,QAAA,UAAA,EAAA,GAAA;AAAA,QAAA,YAAA,EAAA;AAAA;AAAA,KAAA,CAZF,CADe;AAAjB,GAAA;;AAiBA,SACE,KAAA,CAAA,KAAA,EAAA;AAAK,IAAA,SAAS,EAAEvB,OAAO,CAAvB,IAAA;AAA8B,kBAAYC,CAAC,CAA3C,SAA2C,CAA3C;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,GAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,EACE,KAAA,CAAA,KAAA,EAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,GAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,EACE,KAAA,CAAA,EAAA,EAAA;AAAI,IAAA,SAAS,EAAb,UAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,GAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,CADF,CADF,EAIG,KAAK,CAAL,MAAA,GAAA,CAAA,GACC,KAAA,CAAC,KAAD,CAAA,QAAA,EAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,GAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,EACE,KAAA,CAAA,UAAA,EAAA;AAAY,IAAA,YAAY,EAAxB,IAAA;AAAyB,IAAA,SAAS,EAAED,OAAO,CAA3C,QAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,GAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,EACGC,CAAC,CAFN,iBAEM,CADJ,CADF,EAIE,KAAA,CAAA,UAAA,EAAA;AAAY,IAAA,SAAS,EAArB,IAAA;AAA2B,IAAA,SAAS,EAAED,OAAO,CAA7C,EAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,GAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,EACG,KAAK,CAAL,GAAA,CAAU,UAAA,IAAA,EAAA;AAAA,WACT,KAAA,CAAA,IAAA,EAAA;AAAI,MAAA,GAAG,EAAErB,IAAI,CAAb,IAAA;AAAA,MAAA,MAAA,EAAA,KAAA;AAAA,MAAA,QAAA,EAAA;AAAA,QAAA,QAAA,EAAA,YAAA;AAAA,QAAA,UAAA,EAAA,GAAA;AAAA,QAAA,YAAA,EAAA;AAAA;AAAA,KAAA,EACGyC,QAAQ,CADX,IACW,CADX,EAEG,IAAI,CAAJ,QAAA,CAAA,MAAA,GAAA,CAAA,GACC,KAAA,CAAA,IAAA,EAAA;AAAI,MAAA,SAAS,EAAEpB,OAAO,CAAtB,EAAA;AAAA,MAAA,MAAA,EAAA,KAAA;AAAA,MAAA,QAAA,EAAA;AAAA,QAAA,QAAA,EAAA,YAAA;AAAA,QAAA,UAAA,EAAA,GAAA;AAAA,QAAA,YAAA,EAAA;AAAA;AAAA,KAAA,EACG,IAAI,CAAJ,QAAA,CAAA,GAAA,CAAkB,UAAA,OAAA,EAAA;AAAA,aACjB,KAAA,CAAA,IAAA,EAAA;AAAI,QAAA,GAAG,EAAET,OAAO,CAAhB,IAAA;AAAA,QAAA,MAAA,EAAA,KAAA;AAAA,QAAA,QAAA,EAAA;AAAA,UAAA,QAAA,EAAA,YAAA;AAAA,UAAA,UAAA,EAAA,GAAA;AAAA,UAAA,YAAA,EAAA;AAAA;AAAA,OAAA,EAAwB6B,QAAQ,CAAA,OAAA,EADf,IACe,CAAhC,CADiB;AAFtB,KAEI,CADH,CADD,GAHM,IACT,CADS;AANhB,GAMM,CADH,CAJF,CADD,GAJH,IAAA,EAyBE,KAAA,CAAA,KAAA,EAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,GAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,EACE,KAAA,CAAA,EAAA,EAAA;AAAI,IAAA,SAAS,EAAb,aAAA;AAAA,IAAA,MAAA,EAAA,IAAA;AAAA,IAAA,QAAA,EAAA;AAAA,MAAA,QAAA,EAAA,YAAA;AAAA,MAAA,UAAA,EAAA,GAAA;AAAA,MAAA,YAAA,EAAA;AAAA;AAAA,GAAA,CADF,CAzBF,CADF;AA+BD;AAEDI,kBAAkB,CAAlBA,SAAAA,GAA+B;AAC7B1B,EAAAA,KAAK,EAAE2B,SAAS,CAATA,KAAAA,CAAgBC;AADM,CAA/BF","sourcesContent":["/* eslint-disable react/no-danger */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport throttle from 'lodash/throttle';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport Link from 'docs/src/modules/components/Link';\nimport PageContext from 'docs/src/modules/components/PageContext';\nimport Ad from 'docs/src/modules/components/Ad';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    top: 70,\n    // Fix IE 11 position sticky issue.\n    marginTop: 70,\n    width: 175,\n    flexShrink: 0,\n    position: 'sticky',\n    height: 'calc(100vh - 70px)',\n    overflowY: 'auto',\n    padding: theme.spacing(2, 2, 2, 0),\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block',\n    },\n  },\n  contents: {\n    marginTop: theme.spacing(2),\n    paddingLeft: theme.spacing(1),\n  },\n  ul: {\n    padding: 0,\n    margin: 0,\n    listStyle: 'none',\n  },\n  item: {\n    fontSize: '.8125rem',\n    padding: theme.spacing(0.5, 0, 0.5, `${Math.max(0, theme.spacing(1) - 3)}px`),\n    borderLeft: `3px solid transparent`,\n    boxSizing: 'border-box',\n    '&:hover': {\n      borderLeftColor:\n        theme.palette.type === 'light' ? theme.palette.grey[200] : theme.palette.grey[900],\n    },\n    '&$active,&:active': {\n      borderLeftColor:\n        theme.palette.type === 'light' ? theme.palette.grey[300] : theme.palette.grey[800],\n    },\n  },\n  secondaryItem: {\n    paddingLeft: theme.spacing(2.5),\n  },\n  active: {},\n}));\n\n// TODO: these nodes are mutable sources. Use createMutableSource once it's stable\nfunction getItemsClient(headings) {\n  const itemsWithNode = [];\n\n  headings.forEach((item) => {\n    itemsWithNode.push({\n      ...item,\n      node: document.getElementById(item.hash),\n    });\n\n    if (item.children.length > 0) {\n      item.children.forEach((subitem) => {\n        itemsWithNode.push({\n          ...subitem,\n          node: document.getElementById(subitem.hash),\n        });\n      });\n    }\n  });\n  return itemsWithNode;\n}\n\nconst noop = () => {};\n\nfunction useThrottledOnScroll(callback, delay) {\n  const throttledCallback = React.useMemo(() => (callback ? throttle(callback, delay) : noop), [\n    callback,\n    delay,\n  ]);\n\n  React.useEffect(() => {\n    if (throttledCallback === noop) {\n      return undefined;\n    }\n\n    window.addEventListener('scroll', throttledCallback);\n    return () => {\n      window.removeEventListener('scroll', throttledCallback);\n      throttledCallback.cancel();\n    };\n  }, [throttledCallback]);\n}\n\nexport default function AppTableOfContents(props) {\n  const { items } = props;\n  const classes = useStyles();\n  const t = useSelector((state) => state.options.t);\n\n  const itemsWithNodeRef = React.useRef([]);\n  React.useEffect(() => {\n    itemsWithNodeRef.current = getItemsClient(items);\n  }, [items]);\n\n  const { activePage } = React.useContext(PageContext);\n  const [activeState, setActiveState] = React.useState(null);\n  const clickedRef = React.useRef(false);\n  const unsetClickedRef = React.useRef(null);\n  const findActiveIndex = React.useCallback(() => {\n    // Don't set the active index based on scroll if a link was just clicked\n    if (clickedRef.current) {\n      return;\n    }\n\n    let active;\n    for (let i = itemsWithNodeRef.current.length - 1; i >= 0; i -= 1) {\n      // No hash if we're near the top of the page\n      if (document.documentElement.scrollTop < 200) {\n        active = { hash: null };\n        break;\n      }\n\n      const item = itemsWithNodeRef.current[i];\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!item.node) {\n          console.error(`Missing node on the item ${JSON.stringify(item, null, 2)}`);\n        }\n      }\n\n      if (\n        item.node &&\n        item.node.offsetTop <\n          document.documentElement.scrollTop + document.documentElement.clientHeight / 8\n      ) {\n        active = item;\n        break;\n      }\n    }\n\n    if (active && activeState !== active.hash) {\n      setActiveState(active.hash);\n    }\n  }, [activeState]);\n\n  // Corresponds to 10 frames at 60 Hz\n  useThrottledOnScroll(items.length > 0 ? findActiveIndex : null, 166);\n\n  const handleClick = (hash) => (event) => {\n    // Ignore click for new tab/new window behavior\n    if (\n      event.defaultPrevented ||\n      event.button !== 0 || // ignore everything but left-click\n      event.metaKey ||\n      event.ctrlKey ||\n      event.altKey ||\n      event.shiftKey\n    ) {\n      return;\n    }\n\n    // Used to disable findActiveIndex if the page scrolls due to a click\n    clickedRef.current = true;\n    unsetClickedRef.current = setTimeout(() => {\n      clickedRef.current = false;\n    }, 1000);\n\n    if (activeState !== hash) {\n      setActiveState(hash);\n    }\n  };\n\n  React.useEffect(\n    () => () => {\n      clearTimeout(unsetClickedRef.current);\n    },\n    [],\n  );\n\n  const itemLink = (item, secondary) => (\n    <Link\n      display=\"block\"\n      color={activeState === item.hash ? 'textPrimary' : 'textSecondary'}\n      href={`${activePage.pathname}#${item.hash}`}\n      underline=\"none\"\n      onClick={handleClick(item.hash)}\n      className={clsx(\n        classes.item,\n        { [classes.secondaryItem]: secondary },\n        activeState === item.hash ? classes.active : undefined,\n      )}\n    >\n      <span dangerouslySetInnerHTML={{ __html: item.text }} />\n    </Link>\n  );\n\n  return (\n    <nav className={classes.root} aria-label={t('pageTOC')}>\n      <NoSsr>\n        <Ad placement=\"tocs-top\" />\n      </NoSsr>\n      {items.length > 0 ? (\n        <React.Fragment>\n          <Typography gutterBottom className={classes.contents}>\n            {t('tableOfContents')}\n          </Typography>\n          <Typography component=\"ul\" className={classes.ul}>\n            {items.map((item) => (\n              <li key={item.text}>\n                {itemLink(item)}\n                {item.children.length > 0 ? (\n                  <ul className={classes.ul}>\n                    {item.children.map((subitem) => (\n                      <li key={subitem.text}>{itemLink(subitem, true)}</li>\n                    ))}\n                  </ul>\n                ) : null}\n              </li>\n            ))}\n          </Typography>\n        </React.Fragment>\n      ) : null}\n      <NoSsr>\n        <Ad placement=\"tocs-bottom\" />\n      </NoSsr>\n    </nav>\n  );\n}\n\nAppTableOfContents.propTypes = {\n  items: PropTypes.array.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}